{
 "cells": [
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "### In this notebook: \n",
    "\n",
    "#### After we used fetchimage.py and boston_safety_subsample.csv (20000 samples from Boston) in GCP to fetch images, by checking the 'metadata.json' obtained, we found that for the 20,000 samples, we were able to obtain 19,904 images. The portion of the 'safety' and 'subdistrict' were not affected by missing 96 samples. So we would proceed to feed CNN with the 19904 images.\n",
    "\n",
    "#### We further split the 19904 images into Training (80%, 15923) and Test (20%, 3981) sets. Their portion of 'target' and 'subdistrict' columns both represent that of the 'boston_safety_subsample' table."
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 83,
   "metadata": {},
   "outputs": [],
   "source": [
    "import pandas as pd"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 3,
   "metadata": {},
   "outputs": [],
   "source": [
    "metadata = pd.read_json('~/Desktop/metadata.json')"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "### All 20,000 samples' metadata obtained while fetching images"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 16,
   "metadata": {},
   "outputs": [
    {
     "data": {
      "text/html": [
       "<div>\n",
       "<style scoped>\n",
       "    .dataframe tbody tr th:only-of-type {\n",
       "        vertical-align: middle;\n",
       "    }\n",
       "\n",
       "    .dataframe tbody tr th {\n",
       "        vertical-align: top;\n",
       "    }\n",
       "\n",
       "    .dataframe thead th {\n",
       "        text-align: right;\n",
       "    }\n",
       "</style>\n",
       "<table border=\"1\" class=\"dataframe\">\n",
       "  <thead>\n",
       "    <tr style=\"text-align: right;\">\n",
       "      <th></th>\n",
       "      <th>_file</th>\n",
       "      <th>copyright</th>\n",
       "      <th>date</th>\n",
       "      <th>location</th>\n",
       "      <th>pano_id</th>\n",
       "      <th>status</th>\n",
       "    </tr>\n",
       "  </thead>\n",
       "  <tbody>\n",
       "    <tr>\n",
       "      <th>0</th>\n",
       "      <td>gsv_0.jpg</td>\n",
       "      <td>© Google</td>\n",
       "      <td>2018-08-01</td>\n",
       "      <td>{'lat': 42.34874, 'lng': -71.0714033}</td>\n",
       "      <td>6oZeECWwjS0xTzdsN-ZE7g</td>\n",
       "      <td>OK</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>1</th>\n",
       "      <td>gsv_1.jpg</td>\n",
       "      <td>© Google</td>\n",
       "      <td>2018-08-01</td>\n",
       "      <td>{'lat': 42.28859413668265, 'lng': -71.06564443...</td>\n",
       "      <td>q5dOW8BMAXU0vEtSKfa4yA</td>\n",
       "      <td>OK</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>2</th>\n",
       "      <td>gsv_2.jpg</td>\n",
       "      <td>© Google</td>\n",
       "      <td>2017-07-01</td>\n",
       "      <td>{'lat': 42.2957334, 'lng': -71.1380628}</td>\n",
       "      <td>fsVE7knT_rhVkKqyAGbkyg</td>\n",
       "      <td>OK</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>3</th>\n",
       "      <td>gsv_3.jpg</td>\n",
       "      <td>© Google</td>\n",
       "      <td>2018-08-01</td>\n",
       "      <td>{'lat': 42.31308354620529, 'lng': -71.07641430...</td>\n",
       "      <td>AJ7cTQ8rL1aADzsM11K39A</td>\n",
       "      <td>OK</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>4</th>\n",
       "      <td>gsv_4.jpg</td>\n",
       "      <td>© Google</td>\n",
       "      <td>2018-08-01</td>\n",
       "      <td>{'lat': 42.3112202, 'lng': -71.0601081}</td>\n",
       "      <td>MnI2F0n9yqnIGie2rQSAZw</td>\n",
       "      <td>OK</td>\n",
       "    </tr>\n",
       "  </tbody>\n",
       "</table>\n",
       "</div>"
      ],
      "text/plain": [
       "       _file copyright       date  \\\n",
       "0  gsv_0.jpg  © Google 2018-08-01   \n",
       "1  gsv_1.jpg  © Google 2018-08-01   \n",
       "2  gsv_2.jpg  © Google 2017-07-01   \n",
       "3  gsv_3.jpg  © Google 2018-08-01   \n",
       "4  gsv_4.jpg  © Google 2018-08-01   \n",
       "\n",
       "                                            location                 pano_id  \\\n",
       "0              {'lat': 42.34874, 'lng': -71.0714033}  6oZeECWwjS0xTzdsN-ZE7g   \n",
       "1  {'lat': 42.28859413668265, 'lng': -71.06564443...  q5dOW8BMAXU0vEtSKfa4yA   \n",
       "2            {'lat': 42.2957334, 'lng': -71.1380628}  fsVE7knT_rhVkKqyAGbkyg   \n",
       "3  {'lat': 42.31308354620529, 'lng': -71.07641430...  AJ7cTQ8rL1aADzsM11K39A   \n",
       "4            {'lat': 42.3112202, 'lng': -71.0601081}  MnI2F0n9yqnIGie2rQSAZw   \n",
       "\n",
       "  status  \n",
       "0     OK  \n",
       "1     OK  \n",
       "2     OK  \n",
       "3     OK  \n",
       "4     OK  "
      ]
     },
     "execution_count": 16,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "metadata.head()"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 10,
   "metadata": {},
   "outputs": [
    {
     "data": {
      "text/plain": [
       "(20000, 6)"
      ]
     },
     "execution_count": 10,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "metadata.shape"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "### Among all 20000 samples,  for 19904 samples, we are able to download images; for 96 samples, there were \"ZERO_RESULTS\". The index of the 'metadata' table indicates which sample successfully fetched image"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 15,
   "metadata": {},
   "outputs": [
    {
     "data": {
      "text/plain": [
       "status\n",
       "OK              19904\n",
       "ZERO_RESULTS       96\n",
       "dtype: int64"
      ]
     },
     "execution_count": 15,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "metadata.groupby('status').size()"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 9,
   "metadata": {},
   "outputs": [
    {
     "data": {
      "text/plain": [
       "(19904, 6)"
      ]
     },
     "execution_count": 9,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "metadata[metadata['status'] == 'OK'].shape"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 20,
   "metadata": {},
   "outputs": [
    {
     "data": {
      "text/html": [
       "<div>\n",
       "<style scoped>\n",
       "    .dataframe tbody tr th:only-of-type {\n",
       "        vertical-align: middle;\n",
       "    }\n",
       "\n",
       "    .dataframe tbody tr th {\n",
       "        vertical-align: top;\n",
       "    }\n",
       "\n",
       "    .dataframe thead th {\n",
       "        text-align: right;\n",
       "    }\n",
       "</style>\n",
       "<table border=\"1\" class=\"dataframe\">\n",
       "  <thead>\n",
       "    <tr style=\"text-align: right;\">\n",
       "      <th></th>\n",
       "      <th>_file</th>\n",
       "      <th>copyright</th>\n",
       "      <th>date</th>\n",
       "      <th>location</th>\n",
       "      <th>pano_id</th>\n",
       "      <th>status</th>\n",
       "    </tr>\n",
       "  </thead>\n",
       "  <tbody>\n",
       "    <tr>\n",
       "      <th>37</th>\n",
       "      <td>NaN</td>\n",
       "      <td>NaN</td>\n",
       "      <td>NaT</td>\n",
       "      <td>NaN</td>\n",
       "      <td>NaN</td>\n",
       "      <td>ZERO_RESULTS</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>170</th>\n",
       "      <td>NaN</td>\n",
       "      <td>NaN</td>\n",
       "      <td>NaT</td>\n",
       "      <td>NaN</td>\n",
       "      <td>NaN</td>\n",
       "      <td>ZERO_RESULTS</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>1034</th>\n",
       "      <td>NaN</td>\n",
       "      <td>NaN</td>\n",
       "      <td>NaT</td>\n",
       "      <td>NaN</td>\n",
       "      <td>NaN</td>\n",
       "      <td>ZERO_RESULTS</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>1380</th>\n",
       "      <td>NaN</td>\n",
       "      <td>NaN</td>\n",
       "      <td>NaT</td>\n",
       "      <td>NaN</td>\n",
       "      <td>NaN</td>\n",
       "      <td>ZERO_RESULTS</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>1609</th>\n",
       "      <td>NaN</td>\n",
       "      <td>NaN</td>\n",
       "      <td>NaT</td>\n",
       "      <td>NaN</td>\n",
       "      <td>NaN</td>\n",
       "      <td>ZERO_RESULTS</td>\n",
       "    </tr>\n",
       "  </tbody>\n",
       "</table>\n",
       "</div>"
      ],
      "text/plain": [
       "     _file copyright date location pano_id        status\n",
       "37     NaN       NaN  NaT      NaN     NaN  ZERO_RESULTS\n",
       "170    NaN       NaN  NaT      NaN     NaN  ZERO_RESULTS\n",
       "1034   NaN       NaN  NaT      NaN     NaN  ZERO_RESULTS\n",
       "1380   NaN       NaN  NaT      NaN     NaN  ZERO_RESULTS\n",
       "1609   NaN       NaN  NaT      NaN     NaN  ZERO_RESULTS"
      ]
     },
     "execution_count": 20,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "metadata[metadata['status'] == 'ZERO_RESULTS'].head(5)"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 21,
   "metadata": {},
   "outputs": [
    {
     "data": {
      "text/html": [
       "<div>\n",
       "<style scoped>\n",
       "    .dataframe tbody tr th:only-of-type {\n",
       "        vertical-align: middle;\n",
       "    }\n",
       "\n",
       "    .dataframe tbody tr th {\n",
       "        vertical-align: top;\n",
       "    }\n",
       "\n",
       "    .dataframe thead th {\n",
       "        text-align: right;\n",
       "    }\n",
       "</style>\n",
       "<table border=\"1\" class=\"dataframe\">\n",
       "  <thead>\n",
       "    <tr style=\"text-align: right;\">\n",
       "      <th></th>\n",
       "      <th>_file</th>\n",
       "      <th>copyright</th>\n",
       "      <th>date</th>\n",
       "      <th>location</th>\n",
       "      <th>pano_id</th>\n",
       "      <th>status</th>\n",
       "    </tr>\n",
       "  </thead>\n",
       "  <tbody>\n",
       "    <tr>\n",
       "      <th>0</th>\n",
       "      <td>gsv_0.jpg</td>\n",
       "      <td>© Google</td>\n",
       "      <td>2018-08-01</td>\n",
       "      <td>{'lat': 42.34874, 'lng': -71.0714033}</td>\n",
       "      <td>6oZeECWwjS0xTzdsN-ZE7g</td>\n",
       "      <td>OK</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>1</th>\n",
       "      <td>gsv_1.jpg</td>\n",
       "      <td>© Google</td>\n",
       "      <td>2018-08-01</td>\n",
       "      <td>{'lat': 42.28859413668265, 'lng': -71.06564443...</td>\n",
       "      <td>q5dOW8BMAXU0vEtSKfa4yA</td>\n",
       "      <td>OK</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>2</th>\n",
       "      <td>gsv_2.jpg</td>\n",
       "      <td>© Google</td>\n",
       "      <td>2017-07-01</td>\n",
       "      <td>{'lat': 42.2957334, 'lng': -71.1380628}</td>\n",
       "      <td>fsVE7knT_rhVkKqyAGbkyg</td>\n",
       "      <td>OK</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>3</th>\n",
       "      <td>gsv_3.jpg</td>\n",
       "      <td>© Google</td>\n",
       "      <td>2018-08-01</td>\n",
       "      <td>{'lat': 42.31308354620529, 'lng': -71.07641430...</td>\n",
       "      <td>AJ7cTQ8rL1aADzsM11K39A</td>\n",
       "      <td>OK</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>4</th>\n",
       "      <td>gsv_4.jpg</td>\n",
       "      <td>© Google</td>\n",
       "      <td>2018-08-01</td>\n",
       "      <td>{'lat': 42.3112202, 'lng': -71.0601081}</td>\n",
       "      <td>MnI2F0n9yqnIGie2rQSAZw</td>\n",
       "      <td>OK</td>\n",
       "    </tr>\n",
       "  </tbody>\n",
       "</table>\n",
       "</div>"
      ],
      "text/plain": [
       "       _file copyright       date  \\\n",
       "0  gsv_0.jpg  © Google 2018-08-01   \n",
       "1  gsv_1.jpg  © Google 2018-08-01   \n",
       "2  gsv_2.jpg  © Google 2017-07-01   \n",
       "3  gsv_3.jpg  © Google 2018-08-01   \n",
       "4  gsv_4.jpg  © Google 2018-08-01   \n",
       "\n",
       "                                            location                 pano_id  \\\n",
       "0              {'lat': 42.34874, 'lng': -71.0714033}  6oZeECWwjS0xTzdsN-ZE7g   \n",
       "1  {'lat': 42.28859413668265, 'lng': -71.06564443...  q5dOW8BMAXU0vEtSKfa4yA   \n",
       "2            {'lat': 42.2957334, 'lng': -71.1380628}  fsVE7knT_rhVkKqyAGbkyg   \n",
       "3  {'lat': 42.31308354620529, 'lng': -71.07641430...  AJ7cTQ8rL1aADzsM11K39A   \n",
       "4            {'lat': 42.3112202, 'lng': -71.0601081}  MnI2F0n9yqnIGie2rQSAZw   \n",
       "\n",
       "  status  \n",
       "0     OK  \n",
       "1     OK  \n",
       "2     OK  \n",
       "3     OK  \n",
       "4     OK  "
      ]
     },
     "execution_count": 21,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "metadata[metadata['status'] == 'OK'].head(5)"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "### Check whether the 19904 samples' portion of 'safety' and 'subdistrict' were affected\n",
    "\n",
    "Method: Merge table 'image_fetched' with table 'boston_safety_subsample.csv' by index. \n",
    "\n",
    "Result: the 19904 samples' portion of 'safety' and 'subdistrict' were not affected comparing with that of the original 'boston_safety_subsample.csv'"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 22,
   "metadata": {},
   "outputs": [],
   "source": [
    "boston_safety_subsample = pd.read_csv(\"~/Desktop/ML1030/us_safety/boston_safety_subsample.csv\")"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 23,
   "metadata": {},
   "outputs": [
    {
     "data": {
      "text/html": [
       "<div>\n",
       "<style scoped>\n",
       "    .dataframe tbody tr th:only-of-type {\n",
       "        vertical-align: middle;\n",
       "    }\n",
       "\n",
       "    .dataframe tbody tr th {\n",
       "        vertical-align: top;\n",
       "    }\n",
       "\n",
       "    .dataframe thead th {\n",
       "        text-align: right;\n",
       "    }\n",
       "</style>\n",
       "<table border=\"1\" class=\"dataframe\">\n",
       "  <thead>\n",
       "    <tr style=\"text-align: right;\">\n",
       "      <th></th>\n",
       "      <th>Unnamed: 0</th>\n",
       "      <th>city</th>\n",
       "      <th>latitude</th>\n",
       "      <th>longitude</th>\n",
       "      <th>q-score</th>\n",
       "      <th>safety</th>\n",
       "      <th>Coordinates</th>\n",
       "      <th>OBJECTID</th>\n",
       "      <th>SUBDISTRIC</th>\n",
       "    </tr>\n",
       "  </thead>\n",
       "  <tbody>\n",
       "    <tr>\n",
       "      <th>0</th>\n",
       "      <td>25915</td>\n",
       "      <td>Boston</td>\n",
       "      <td>42.348724</td>\n",
       "      <td>-71.071495</td>\n",
       "      <td>28.634125</td>\n",
       "      <td>1</td>\n",
       "      <td>POINT (-71.071495 42.348724)</td>\n",
       "      <td>54998</td>\n",
       "      <td>Residential</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>1</th>\n",
       "      <td>1131</td>\n",
       "      <td>Boston</td>\n",
       "      <td>42.288597</td>\n",
       "      <td>-71.065681</td>\n",
       "      <td>26.525396</td>\n",
       "      <td>1</td>\n",
       "      <td>POINT (-71.06568100000001 42.288597)</td>\n",
       "      <td>55642</td>\n",
       "      <td>Residential</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>2</th>\n",
       "      <td>121773</td>\n",
       "      <td>Boston</td>\n",
       "      <td>42.295563</td>\n",
       "      <td>-71.138023</td>\n",
       "      <td>29.614868</td>\n",
       "      <td>1</td>\n",
       "      <td>POINT (-71.138023 42.295563)</td>\n",
       "      <td>54450</td>\n",
       "      <td>Residential</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>3</th>\n",
       "      <td>7005</td>\n",
       "      <td>Boston</td>\n",
       "      <td>42.312973</td>\n",
       "      <td>-71.076004</td>\n",
       "      <td>30.076191</td>\n",
       "      <td>1</td>\n",
       "      <td>POINT (-71.076004 42.312973)</td>\n",
       "      <td>55523</td>\n",
       "      <td>Residential</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>4</th>\n",
       "      <td>6342</td>\n",
       "      <td>Boston</td>\n",
       "      <td>42.311348</td>\n",
       "      <td>-71.060051</td>\n",
       "      <td>26.038879</td>\n",
       "      <td>1</td>\n",
       "      <td>POINT (-71.060051 42.311348)</td>\n",
       "      <td>55604</td>\n",
       "      <td>Residential</td>\n",
       "    </tr>\n",
       "  </tbody>\n",
       "</table>\n",
       "</div>"
      ],
      "text/plain": [
       "   Unnamed: 0    city   latitude  longitude    q-score  safety  \\\n",
       "0       25915  Boston  42.348724 -71.071495  28.634125       1   \n",
       "1        1131  Boston  42.288597 -71.065681  26.525396       1   \n",
       "2      121773  Boston  42.295563 -71.138023  29.614868       1   \n",
       "3        7005  Boston  42.312973 -71.076004  30.076191       1   \n",
       "4        6342  Boston  42.311348 -71.060051  26.038879       1   \n",
       "\n",
       "                            Coordinates  OBJECTID   SUBDISTRIC  \n",
       "0          POINT (-71.071495 42.348724)     54998  Residential  \n",
       "1  POINT (-71.06568100000001 42.288597)     55642  Residential  \n",
       "2          POINT (-71.138023 42.295563)     54450  Residential  \n",
       "3          POINT (-71.076004 42.312973)     55523  Residential  \n",
       "4          POINT (-71.060051 42.311348)     55604  Residential  "
      ]
     },
     "execution_count": 23,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "boston_safety_subsample.head()"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 28,
   "metadata": {},
   "outputs": [
    {
     "data": {
      "text/plain": [
       "(20000, 9)"
      ]
     },
     "execution_count": 28,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "boston_safety_subsample.shape"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 24,
   "metadata": {},
   "outputs": [],
   "source": [
    "image_fetched = metadata[metadata['status'] == 'OK']"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 26,
   "metadata": {},
   "outputs": [
    {
     "data": {
      "text/plain": [
       "(19904, 6)"
      ]
     },
     "execution_count": 26,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "image_fetched.shape"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 29,
   "metadata": {},
   "outputs": [],
   "source": [
    "image_fetched_with_target = pd.merge(image_fetched, boston_safety_subsample, left_index=True, right_index=True)"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 39,
   "metadata": {},
   "outputs": [
    {
     "data": {
      "text/html": [
       "<div>\n",
       "<style scoped>\n",
       "    .dataframe tbody tr th:only-of-type {\n",
       "        vertical-align: middle;\n",
       "    }\n",
       "\n",
       "    .dataframe tbody tr th {\n",
       "        vertical-align: top;\n",
       "    }\n",
       "\n",
       "    .dataframe thead th {\n",
       "        text-align: right;\n",
       "    }\n",
       "</style>\n",
       "<table border=\"1\" class=\"dataframe\">\n",
       "  <thead>\n",
       "    <tr style=\"text-align: right;\">\n",
       "      <th></th>\n",
       "      <th>_file</th>\n",
       "      <th>copyright</th>\n",
       "      <th>date</th>\n",
       "      <th>location</th>\n",
       "      <th>pano_id</th>\n",
       "      <th>status</th>\n",
       "      <th>Unnamed: 0</th>\n",
       "      <th>city</th>\n",
       "      <th>latitude</th>\n",
       "      <th>longitude</th>\n",
       "      <th>q-score</th>\n",
       "      <th>safety</th>\n",
       "      <th>Coordinates</th>\n",
       "      <th>OBJECTID</th>\n",
       "      <th>SUBDISTRIC</th>\n",
       "    </tr>\n",
       "  </thead>\n",
       "  <tbody>\n",
       "    <tr>\n",
       "      <th>0</th>\n",
       "      <td>gsv_0.jpg</td>\n",
       "      <td>© Google</td>\n",
       "      <td>2018-08-01</td>\n",
       "      <td>{'lat': 42.34874, 'lng': -71.0714033}</td>\n",
       "      <td>6oZeECWwjS0xTzdsN-ZE7g</td>\n",
       "      <td>OK</td>\n",
       "      <td>25915</td>\n",
       "      <td>Boston</td>\n",
       "      <td>42.348724</td>\n",
       "      <td>-71.071495</td>\n",
       "      <td>28.634125</td>\n",
       "      <td>1</td>\n",
       "      <td>POINT (-71.071495 42.348724)</td>\n",
       "      <td>54998</td>\n",
       "      <td>Residential</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>1</th>\n",
       "      <td>gsv_1.jpg</td>\n",
       "      <td>© Google</td>\n",
       "      <td>2018-08-01</td>\n",
       "      <td>{'lat': 42.28859413668265, 'lng': -71.06564443...</td>\n",
       "      <td>q5dOW8BMAXU0vEtSKfa4yA</td>\n",
       "      <td>OK</td>\n",
       "      <td>1131</td>\n",
       "      <td>Boston</td>\n",
       "      <td>42.288597</td>\n",
       "      <td>-71.065681</td>\n",
       "      <td>26.525396</td>\n",
       "      <td>1</td>\n",
       "      <td>POINT (-71.06568100000001 42.288597)</td>\n",
       "      <td>55642</td>\n",
       "      <td>Residential</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>2</th>\n",
       "      <td>gsv_2.jpg</td>\n",
       "      <td>© Google</td>\n",
       "      <td>2017-07-01</td>\n",
       "      <td>{'lat': 42.2957334, 'lng': -71.1380628}</td>\n",
       "      <td>fsVE7knT_rhVkKqyAGbkyg</td>\n",
       "      <td>OK</td>\n",
       "      <td>121773</td>\n",
       "      <td>Boston</td>\n",
       "      <td>42.295563</td>\n",
       "      <td>-71.138023</td>\n",
       "      <td>29.614868</td>\n",
       "      <td>1</td>\n",
       "      <td>POINT (-71.138023 42.295563)</td>\n",
       "      <td>54450</td>\n",
       "      <td>Residential</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>3</th>\n",
       "      <td>gsv_3.jpg</td>\n",
       "      <td>© Google</td>\n",
       "      <td>2018-08-01</td>\n",
       "      <td>{'lat': 42.31308354620529, 'lng': -71.07641430...</td>\n",
       "      <td>AJ7cTQ8rL1aADzsM11K39A</td>\n",
       "      <td>OK</td>\n",
       "      <td>7005</td>\n",
       "      <td>Boston</td>\n",
       "      <td>42.312973</td>\n",
       "      <td>-71.076004</td>\n",
       "      <td>30.076191</td>\n",
       "      <td>1</td>\n",
       "      <td>POINT (-71.076004 42.312973)</td>\n",
       "      <td>55523</td>\n",
       "      <td>Residential</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>4</th>\n",
       "      <td>gsv_4.jpg</td>\n",
       "      <td>© Google</td>\n",
       "      <td>2018-08-01</td>\n",
       "      <td>{'lat': 42.3112202, 'lng': -71.0601081}</td>\n",
       "      <td>MnI2F0n9yqnIGie2rQSAZw</td>\n",
       "      <td>OK</td>\n",
       "      <td>6342</td>\n",
       "      <td>Boston</td>\n",
       "      <td>42.311348</td>\n",
       "      <td>-71.060051</td>\n",
       "      <td>26.038879</td>\n",
       "      <td>1</td>\n",
       "      <td>POINT (-71.060051 42.311348)</td>\n",
       "      <td>55604</td>\n",
       "      <td>Residential</td>\n",
       "    </tr>\n",
       "  </tbody>\n",
       "</table>\n",
       "</div>"
      ],
      "text/plain": [
       "       _file copyright       date  \\\n",
       "0  gsv_0.jpg  © Google 2018-08-01   \n",
       "1  gsv_1.jpg  © Google 2018-08-01   \n",
       "2  gsv_2.jpg  © Google 2017-07-01   \n",
       "3  gsv_3.jpg  © Google 2018-08-01   \n",
       "4  gsv_4.jpg  © Google 2018-08-01   \n",
       "\n",
       "                                            location                 pano_id  \\\n",
       "0              {'lat': 42.34874, 'lng': -71.0714033}  6oZeECWwjS0xTzdsN-ZE7g   \n",
       "1  {'lat': 42.28859413668265, 'lng': -71.06564443...  q5dOW8BMAXU0vEtSKfa4yA   \n",
       "2            {'lat': 42.2957334, 'lng': -71.1380628}  fsVE7knT_rhVkKqyAGbkyg   \n",
       "3  {'lat': 42.31308354620529, 'lng': -71.07641430...  AJ7cTQ8rL1aADzsM11K39A   \n",
       "4            {'lat': 42.3112202, 'lng': -71.0601081}  MnI2F0n9yqnIGie2rQSAZw   \n",
       "\n",
       "  status  Unnamed: 0    city   latitude  longitude    q-score  safety  \\\n",
       "0     OK       25915  Boston  42.348724 -71.071495  28.634125       1   \n",
       "1     OK        1131  Boston  42.288597 -71.065681  26.525396       1   \n",
       "2     OK      121773  Boston  42.295563 -71.138023  29.614868       1   \n",
       "3     OK        7005  Boston  42.312973 -71.076004  30.076191       1   \n",
       "4     OK        6342  Boston  42.311348 -71.060051  26.038879       1   \n",
       "\n",
       "                            Coordinates  OBJECTID   SUBDISTRIC  \n",
       "0          POINT (-71.071495 42.348724)     54998  Residential  \n",
       "1  POINT (-71.06568100000001 42.288597)     55642  Residential  \n",
       "2          POINT (-71.138023 42.295563)     54450  Residential  \n",
       "3          POINT (-71.076004 42.312973)     55523  Residential  \n",
       "4          POINT (-71.060051 42.311348)     55604  Residential  "
      ]
     },
     "execution_count": 39,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "image_fetched_with_target.head()"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "#### boston_safety_subsample: count by 'SUBDISTRIC','safety'"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 35,
   "metadata": {},
   "outputs": [
    {
     "data": {
      "text/html": [
       "<div>\n",
       "<style scoped>\n",
       "    .dataframe tbody tr th:only-of-type {\n",
       "        vertical-align: middle;\n",
       "    }\n",
       "\n",
       "    .dataframe tbody tr th {\n",
       "        vertical-align: top;\n",
       "    }\n",
       "\n",
       "    .dataframe thead th {\n",
       "        text-align: right;\n",
       "    }\n",
       "</style>\n",
       "<table border=\"1\" class=\"dataframe\">\n",
       "  <thead>\n",
       "    <tr style=\"text-align: right;\">\n",
       "      <th></th>\n",
       "      <th></th>\n",
       "      <th>Unnamed: 0</th>\n",
       "      <th>city</th>\n",
       "      <th>latitude</th>\n",
       "      <th>longitude</th>\n",
       "      <th>q-score</th>\n",
       "      <th>Coordinates</th>\n",
       "      <th>OBJECTID</th>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>SUBDISTRIC</th>\n",
       "      <th>safety</th>\n",
       "      <th></th>\n",
       "      <th></th>\n",
       "      <th></th>\n",
       "      <th></th>\n",
       "      <th></th>\n",
       "      <th></th>\n",
       "      <th></th>\n",
       "    </tr>\n",
       "  </thead>\n",
       "  <tbody>\n",
       "    <tr>\n",
       "      <th rowspan=\"2\" valign=\"top\">Business</th>\n",
       "      <th>0</th>\n",
       "      <td>534</td>\n",
       "      <td>534</td>\n",
       "      <td>534</td>\n",
       "      <td>534</td>\n",
       "      <td>534</td>\n",
       "      <td>534</td>\n",
       "      <td>534</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>1</th>\n",
       "      <td>534</td>\n",
       "      <td>534</td>\n",
       "      <td>534</td>\n",
       "      <td>534</td>\n",
       "      <td>534</td>\n",
       "      <td>534</td>\n",
       "      <td>534</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th rowspan=\"2\" valign=\"top\">Comm/Instit</th>\n",
       "      <th>0</th>\n",
       "      <td>210</td>\n",
       "      <td>210</td>\n",
       "      <td>210</td>\n",
       "      <td>210</td>\n",
       "      <td>210</td>\n",
       "      <td>210</td>\n",
       "      <td>210</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>1</th>\n",
       "      <td>210</td>\n",
       "      <td>210</td>\n",
       "      <td>210</td>\n",
       "      <td>210</td>\n",
       "      <td>210</td>\n",
       "      <td>210</td>\n",
       "      <td>210</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th rowspan=\"2\" valign=\"top\">Industrial</th>\n",
       "      <th>0</th>\n",
       "      <td>2275</td>\n",
       "      <td>2275</td>\n",
       "      <td>2275</td>\n",
       "      <td>2275</td>\n",
       "      <td>2275</td>\n",
       "      <td>2275</td>\n",
       "      <td>2275</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>1</th>\n",
       "      <td>505</td>\n",
       "      <td>505</td>\n",
       "      <td>505</td>\n",
       "      <td>505</td>\n",
       "      <td>505</td>\n",
       "      <td>505</td>\n",
       "      <td>505</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th rowspan=\"2\" valign=\"top\">Miscellaneous</th>\n",
       "      <th>0</th>\n",
       "      <td>428</td>\n",
       "      <td>428</td>\n",
       "      <td>428</td>\n",
       "      <td>428</td>\n",
       "      <td>428</td>\n",
       "      <td>428</td>\n",
       "      <td>428</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>1</th>\n",
       "      <td>439</td>\n",
       "      <td>439</td>\n",
       "      <td>439</td>\n",
       "      <td>439</td>\n",
       "      <td>439</td>\n",
       "      <td>439</td>\n",
       "      <td>439</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th rowspan=\"2\" valign=\"top\">Mixed Use</th>\n",
       "      <th>0</th>\n",
       "      <td>663</td>\n",
       "      <td>663</td>\n",
       "      <td>663</td>\n",
       "      <td>663</td>\n",
       "      <td>663</td>\n",
       "      <td>663</td>\n",
       "      <td>663</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>1</th>\n",
       "      <td>652</td>\n",
       "      <td>652</td>\n",
       "      <td>652</td>\n",
       "      <td>652</td>\n",
       "      <td>652</td>\n",
       "      <td>652</td>\n",
       "      <td>652</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th rowspan=\"2\" valign=\"top\">Open Space</th>\n",
       "      <th>0</th>\n",
       "      <td>1786</td>\n",
       "      <td>1786</td>\n",
       "      <td>1786</td>\n",
       "      <td>1786</td>\n",
       "      <td>1786</td>\n",
       "      <td>1786</td>\n",
       "      <td>1786</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>1</th>\n",
       "      <td>1786</td>\n",
       "      <td>1786</td>\n",
       "      <td>1786</td>\n",
       "      <td>1786</td>\n",
       "      <td>1786</td>\n",
       "      <td>1786</td>\n",
       "      <td>1786</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th rowspan=\"2\" valign=\"top\">Residential</th>\n",
       "      <th>0</th>\n",
       "      <td>4989</td>\n",
       "      <td>4989</td>\n",
       "      <td>4989</td>\n",
       "      <td>4989</td>\n",
       "      <td>4989</td>\n",
       "      <td>4989</td>\n",
       "      <td>4989</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>1</th>\n",
       "      <td>4989</td>\n",
       "      <td>4989</td>\n",
       "      <td>4989</td>\n",
       "      <td>4989</td>\n",
       "      <td>4989</td>\n",
       "      <td>4989</td>\n",
       "      <td>4989</td>\n",
       "    </tr>\n",
       "  </tbody>\n",
       "</table>\n",
       "</div>"
      ],
      "text/plain": [
       "                      Unnamed: 0  city  latitude  longitude  q-score  \\\n",
       "SUBDISTRIC    safety                                                   \n",
       "Business      0              534   534       534        534      534   \n",
       "              1              534   534       534        534      534   \n",
       "Comm/Instit   0              210   210       210        210      210   \n",
       "              1              210   210       210        210      210   \n",
       "Industrial    0             2275  2275      2275       2275     2275   \n",
       "              1              505   505       505        505      505   \n",
       "Miscellaneous 0              428   428       428        428      428   \n",
       "              1              439   439       439        439      439   \n",
       "Mixed Use     0              663   663       663        663      663   \n",
       "              1              652   652       652        652      652   \n",
       "Open Space    0             1786  1786      1786       1786     1786   \n",
       "              1             1786  1786      1786       1786     1786   \n",
       "Residential   0             4989  4989      4989       4989     4989   \n",
       "              1             4989  4989      4989       4989     4989   \n",
       "\n",
       "                      Coordinates  OBJECTID  \n",
       "SUBDISTRIC    safety                         \n",
       "Business      0               534       534  \n",
       "              1               534       534  \n",
       "Comm/Instit   0               210       210  \n",
       "              1               210       210  \n",
       "Industrial    0              2275      2275  \n",
       "              1               505       505  \n",
       "Miscellaneous 0               428       428  \n",
       "              1               439       439  \n",
       "Mixed Use     0               663       663  \n",
       "              1               652       652  \n",
       "Open Space    0              1786      1786  \n",
       "              1              1786      1786  \n",
       "Residential   0              4989      4989  \n",
       "              1              4989      4989  "
      ]
     },
     "execution_count": 35,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "boston_safety_subsample.groupby(['SUBDISTRIC','safety']).count()"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "#### image_fetched_with_target: count by 'SUBDISTRIC', 'safety'"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 32,
   "metadata": {},
   "outputs": [
    {
     "data": {
      "text/html": [
       "<div>\n",
       "<style scoped>\n",
       "    .dataframe tbody tr th:only-of-type {\n",
       "        vertical-align: middle;\n",
       "    }\n",
       "\n",
       "    .dataframe tbody tr th {\n",
       "        vertical-align: top;\n",
       "    }\n",
       "\n",
       "    .dataframe thead th {\n",
       "        text-align: right;\n",
       "    }\n",
       "</style>\n",
       "<table border=\"1\" class=\"dataframe\">\n",
       "  <thead>\n",
       "    <tr style=\"text-align: right;\">\n",
       "      <th></th>\n",
       "      <th></th>\n",
       "      <th>_file</th>\n",
       "      <th>copyright</th>\n",
       "      <th>date</th>\n",
       "      <th>location</th>\n",
       "      <th>pano_id</th>\n",
       "      <th>status</th>\n",
       "      <th>Unnamed: 0</th>\n",
       "      <th>city</th>\n",
       "      <th>latitude</th>\n",
       "      <th>longitude</th>\n",
       "      <th>q-score</th>\n",
       "      <th>Coordinates</th>\n",
       "      <th>OBJECTID</th>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>SUBDISTRIC</th>\n",
       "      <th>safety</th>\n",
       "      <th></th>\n",
       "      <th></th>\n",
       "      <th></th>\n",
       "      <th></th>\n",
       "      <th></th>\n",
       "      <th></th>\n",
       "      <th></th>\n",
       "      <th></th>\n",
       "      <th></th>\n",
       "      <th></th>\n",
       "      <th></th>\n",
       "      <th></th>\n",
       "      <th></th>\n",
       "    </tr>\n",
       "  </thead>\n",
       "  <tbody>\n",
       "    <tr>\n",
       "      <th rowspan=\"2\" valign=\"top\">Business</th>\n",
       "      <th>0</th>\n",
       "      <td>534</td>\n",
       "      <td>534</td>\n",
       "      <td>533</td>\n",
       "      <td>534</td>\n",
       "      <td>534</td>\n",
       "      <td>534</td>\n",
       "      <td>534</td>\n",
       "      <td>534</td>\n",
       "      <td>534</td>\n",
       "      <td>534</td>\n",
       "      <td>534</td>\n",
       "      <td>534</td>\n",
       "      <td>534</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>1</th>\n",
       "      <td>533</td>\n",
       "      <td>533</td>\n",
       "      <td>529</td>\n",
       "      <td>533</td>\n",
       "      <td>533</td>\n",
       "      <td>533</td>\n",
       "      <td>533</td>\n",
       "      <td>533</td>\n",
       "      <td>533</td>\n",
       "      <td>533</td>\n",
       "      <td>533</td>\n",
       "      <td>533</td>\n",
       "      <td>533</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th rowspan=\"2\" valign=\"top\">Comm/Instit</th>\n",
       "      <th>0</th>\n",
       "      <td>200</td>\n",
       "      <td>200</td>\n",
       "      <td>200</td>\n",
       "      <td>200</td>\n",
       "      <td>200</td>\n",
       "      <td>200</td>\n",
       "      <td>200</td>\n",
       "      <td>200</td>\n",
       "      <td>200</td>\n",
       "      <td>200</td>\n",
       "      <td>200</td>\n",
       "      <td>200</td>\n",
       "      <td>200</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>1</th>\n",
       "      <td>209</td>\n",
       "      <td>209</td>\n",
       "      <td>209</td>\n",
       "      <td>209</td>\n",
       "      <td>209</td>\n",
       "      <td>209</td>\n",
       "      <td>209</td>\n",
       "      <td>209</td>\n",
       "      <td>209</td>\n",
       "      <td>209</td>\n",
       "      <td>209</td>\n",
       "      <td>209</td>\n",
       "      <td>209</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th rowspan=\"2\" valign=\"top\">Industrial</th>\n",
       "      <th>0</th>\n",
       "      <td>2249</td>\n",
       "      <td>2249</td>\n",
       "      <td>2249</td>\n",
       "      <td>2249</td>\n",
       "      <td>2249</td>\n",
       "      <td>2249</td>\n",
       "      <td>2249</td>\n",
       "      <td>2249</td>\n",
       "      <td>2249</td>\n",
       "      <td>2249</td>\n",
       "      <td>2249</td>\n",
       "      <td>2249</td>\n",
       "      <td>2249</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>1</th>\n",
       "      <td>497</td>\n",
       "      <td>497</td>\n",
       "      <td>497</td>\n",
       "      <td>497</td>\n",
       "      <td>497</td>\n",
       "      <td>497</td>\n",
       "      <td>497</td>\n",
       "      <td>497</td>\n",
       "      <td>497</td>\n",
       "      <td>497</td>\n",
       "      <td>497</td>\n",
       "      <td>497</td>\n",
       "      <td>497</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th rowspan=\"2\" valign=\"top\">Miscellaneous</th>\n",
       "      <th>0</th>\n",
       "      <td>426</td>\n",
       "      <td>426</td>\n",
       "      <td>426</td>\n",
       "      <td>426</td>\n",
       "      <td>426</td>\n",
       "      <td>426</td>\n",
       "      <td>426</td>\n",
       "      <td>426</td>\n",
       "      <td>426</td>\n",
       "      <td>426</td>\n",
       "      <td>426</td>\n",
       "      <td>426</td>\n",
       "      <td>426</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>1</th>\n",
       "      <td>437</td>\n",
       "      <td>437</td>\n",
       "      <td>437</td>\n",
       "      <td>437</td>\n",
       "      <td>437</td>\n",
       "      <td>437</td>\n",
       "      <td>437</td>\n",
       "      <td>437</td>\n",
       "      <td>437</td>\n",
       "      <td>437</td>\n",
       "      <td>437</td>\n",
       "      <td>437</td>\n",
       "      <td>437</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th rowspan=\"2\" valign=\"top\">Mixed Use</th>\n",
       "      <th>0</th>\n",
       "      <td>660</td>\n",
       "      <td>660</td>\n",
       "      <td>657</td>\n",
       "      <td>660</td>\n",
       "      <td>660</td>\n",
       "      <td>660</td>\n",
       "      <td>660</td>\n",
       "      <td>660</td>\n",
       "      <td>660</td>\n",
       "      <td>660</td>\n",
       "      <td>660</td>\n",
       "      <td>660</td>\n",
       "      <td>660</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>1</th>\n",
       "      <td>649</td>\n",
       "      <td>649</td>\n",
       "      <td>646</td>\n",
       "      <td>649</td>\n",
       "      <td>649</td>\n",
       "      <td>649</td>\n",
       "      <td>649</td>\n",
       "      <td>649</td>\n",
       "      <td>649</td>\n",
       "      <td>649</td>\n",
       "      <td>649</td>\n",
       "      <td>649</td>\n",
       "      <td>649</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th rowspan=\"2\" valign=\"top\">Open Space</th>\n",
       "      <th>0</th>\n",
       "      <td>1772</td>\n",
       "      <td>1772</td>\n",
       "      <td>1772</td>\n",
       "      <td>1772</td>\n",
       "      <td>1772</td>\n",
       "      <td>1772</td>\n",
       "      <td>1772</td>\n",
       "      <td>1772</td>\n",
       "      <td>1772</td>\n",
       "      <td>1772</td>\n",
       "      <td>1772</td>\n",
       "      <td>1772</td>\n",
       "      <td>1772</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>1</th>\n",
       "      <td>1777</td>\n",
       "      <td>1777</td>\n",
       "      <td>1777</td>\n",
       "      <td>1777</td>\n",
       "      <td>1777</td>\n",
       "      <td>1777</td>\n",
       "      <td>1777</td>\n",
       "      <td>1777</td>\n",
       "      <td>1777</td>\n",
       "      <td>1777</td>\n",
       "      <td>1777</td>\n",
       "      <td>1777</td>\n",
       "      <td>1777</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th rowspan=\"2\" valign=\"top\">Residential</th>\n",
       "      <th>0</th>\n",
       "      <td>4980</td>\n",
       "      <td>4980</td>\n",
       "      <td>4979</td>\n",
       "      <td>4980</td>\n",
       "      <td>4980</td>\n",
       "      <td>4980</td>\n",
       "      <td>4980</td>\n",
       "      <td>4980</td>\n",
       "      <td>4980</td>\n",
       "      <td>4980</td>\n",
       "      <td>4980</td>\n",
       "      <td>4980</td>\n",
       "      <td>4980</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>1</th>\n",
       "      <td>4981</td>\n",
       "      <td>4981</td>\n",
       "      <td>4980</td>\n",
       "      <td>4981</td>\n",
       "      <td>4981</td>\n",
       "      <td>4981</td>\n",
       "      <td>4981</td>\n",
       "      <td>4981</td>\n",
       "      <td>4981</td>\n",
       "      <td>4981</td>\n",
       "      <td>4981</td>\n",
       "      <td>4981</td>\n",
       "      <td>4981</td>\n",
       "    </tr>\n",
       "  </tbody>\n",
       "</table>\n",
       "</div>"
      ],
      "text/plain": [
       "                      _file  copyright  date  location  pano_id  status  \\\n",
       "SUBDISTRIC    safety                                                      \n",
       "Business      0         534        534   533       534      534     534   \n",
       "              1         533        533   529       533      533     533   \n",
       "Comm/Instit   0         200        200   200       200      200     200   \n",
       "              1         209        209   209       209      209     209   \n",
       "Industrial    0        2249       2249  2249      2249     2249    2249   \n",
       "              1         497        497   497       497      497     497   \n",
       "Miscellaneous 0         426        426   426       426      426     426   \n",
       "              1         437        437   437       437      437     437   \n",
       "Mixed Use     0         660        660   657       660      660     660   \n",
       "              1         649        649   646       649      649     649   \n",
       "Open Space    0        1772       1772  1772      1772     1772    1772   \n",
       "              1        1777       1777  1777      1777     1777    1777   \n",
       "Residential   0        4980       4980  4979      4980     4980    4980   \n",
       "              1        4981       4981  4980      4981     4981    4981   \n",
       "\n",
       "                      Unnamed: 0  city  latitude  longitude  q-score  \\\n",
       "SUBDISTRIC    safety                                                   \n",
       "Business      0              534   534       534        534      534   \n",
       "              1              533   533       533        533      533   \n",
       "Comm/Instit   0              200   200       200        200      200   \n",
       "              1              209   209       209        209      209   \n",
       "Industrial    0             2249  2249      2249       2249     2249   \n",
       "              1              497   497       497        497      497   \n",
       "Miscellaneous 0              426   426       426        426      426   \n",
       "              1              437   437       437        437      437   \n",
       "Mixed Use     0              660   660       660        660      660   \n",
       "              1              649   649       649        649      649   \n",
       "Open Space    0             1772  1772      1772       1772     1772   \n",
       "              1             1777  1777      1777       1777     1777   \n",
       "Residential   0             4980  4980      4980       4980     4980   \n",
       "              1             4981  4981      4981       4981     4981   \n",
       "\n",
       "                      Coordinates  OBJECTID  \n",
       "SUBDISTRIC    safety                         \n",
       "Business      0               534       534  \n",
       "              1               533       533  \n",
       "Comm/Instit   0               200       200  \n",
       "              1               209       209  \n",
       "Industrial    0              2249      2249  \n",
       "              1               497       497  \n",
       "Miscellaneous 0               426       426  \n",
       "              1               437       437  \n",
       "Mixed Use     0               660       660  \n",
       "              1               649       649  \n",
       "Open Space    0              1772      1772  \n",
       "              1              1777      1777  \n",
       "Residential   0              4980      4980  \n",
       "              1              4981      4981  "
      ]
     },
     "execution_count": 32,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "image_fetched_with_target.groupby(['SUBDISTRIC','safety']).count()"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "#### boston_safety_subsample: count by 'SUBDISTRIC'"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 37,
   "metadata": {},
   "outputs": [
    {
     "data": {
      "text/html": [
       "<div>\n",
       "<style scoped>\n",
       "    .dataframe tbody tr th:only-of-type {\n",
       "        vertical-align: middle;\n",
       "    }\n",
       "\n",
       "    .dataframe tbody tr th {\n",
       "        vertical-align: top;\n",
       "    }\n",
       "\n",
       "    .dataframe thead th {\n",
       "        text-align: right;\n",
       "    }\n",
       "</style>\n",
       "<table border=\"1\" class=\"dataframe\">\n",
       "  <thead>\n",
       "    <tr style=\"text-align: right;\">\n",
       "      <th></th>\n",
       "      <th>Unnamed: 0</th>\n",
       "      <th>city</th>\n",
       "      <th>latitude</th>\n",
       "      <th>longitude</th>\n",
       "      <th>q-score</th>\n",
       "      <th>safety</th>\n",
       "      <th>Coordinates</th>\n",
       "      <th>OBJECTID</th>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>SUBDISTRIC</th>\n",
       "      <th></th>\n",
       "      <th></th>\n",
       "      <th></th>\n",
       "      <th></th>\n",
       "      <th></th>\n",
       "      <th></th>\n",
       "      <th></th>\n",
       "      <th></th>\n",
       "    </tr>\n",
       "  </thead>\n",
       "  <tbody>\n",
       "    <tr>\n",
       "      <th>Business</th>\n",
       "      <td>1068</td>\n",
       "      <td>1068</td>\n",
       "      <td>1068</td>\n",
       "      <td>1068</td>\n",
       "      <td>1068</td>\n",
       "      <td>1068</td>\n",
       "      <td>1068</td>\n",
       "      <td>1068</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>Comm/Instit</th>\n",
       "      <td>420</td>\n",
       "      <td>420</td>\n",
       "      <td>420</td>\n",
       "      <td>420</td>\n",
       "      <td>420</td>\n",
       "      <td>420</td>\n",
       "      <td>420</td>\n",
       "      <td>420</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>Industrial</th>\n",
       "      <td>2780</td>\n",
       "      <td>2780</td>\n",
       "      <td>2780</td>\n",
       "      <td>2780</td>\n",
       "      <td>2780</td>\n",
       "      <td>2780</td>\n",
       "      <td>2780</td>\n",
       "      <td>2780</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>Miscellaneous</th>\n",
       "      <td>867</td>\n",
       "      <td>867</td>\n",
       "      <td>867</td>\n",
       "      <td>867</td>\n",
       "      <td>867</td>\n",
       "      <td>867</td>\n",
       "      <td>867</td>\n",
       "      <td>867</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>Mixed Use</th>\n",
       "      <td>1315</td>\n",
       "      <td>1315</td>\n",
       "      <td>1315</td>\n",
       "      <td>1315</td>\n",
       "      <td>1315</td>\n",
       "      <td>1315</td>\n",
       "      <td>1315</td>\n",
       "      <td>1315</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>Open Space</th>\n",
       "      <td>3572</td>\n",
       "      <td>3572</td>\n",
       "      <td>3572</td>\n",
       "      <td>3572</td>\n",
       "      <td>3572</td>\n",
       "      <td>3572</td>\n",
       "      <td>3572</td>\n",
       "      <td>3572</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>Residential</th>\n",
       "      <td>9978</td>\n",
       "      <td>9978</td>\n",
       "      <td>9978</td>\n",
       "      <td>9978</td>\n",
       "      <td>9978</td>\n",
       "      <td>9978</td>\n",
       "      <td>9978</td>\n",
       "      <td>9978</td>\n",
       "    </tr>\n",
       "  </tbody>\n",
       "</table>\n",
       "</div>"
      ],
      "text/plain": [
       "               Unnamed: 0  city  latitude  longitude  q-score  safety  \\\n",
       "SUBDISTRIC                                                              \n",
       "Business             1068  1068      1068       1068     1068    1068   \n",
       "Comm/Instit           420   420       420        420      420     420   \n",
       "Industrial           2780  2780      2780       2780     2780    2780   \n",
       "Miscellaneous         867   867       867        867      867     867   \n",
       "Mixed Use            1315  1315      1315       1315     1315    1315   \n",
       "Open Space           3572  3572      3572       3572     3572    3572   \n",
       "Residential          9978  9978      9978       9978     9978    9978   \n",
       "\n",
       "               Coordinates  OBJECTID  \n",
       "SUBDISTRIC                            \n",
       "Business              1068      1068  \n",
       "Comm/Instit            420       420  \n",
       "Industrial            2780      2780  \n",
       "Miscellaneous          867       867  \n",
       "Mixed Use             1315      1315  \n",
       "Open Space            3572      3572  \n",
       "Residential           9978      9978  "
      ]
     },
     "execution_count": 37,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "boston_safety_subsample.groupby(['SUBDISTRIC']).count()"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "#### image_fetched_with_target: count by 'SUBDISTRIC'¶"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 36,
   "metadata": {},
   "outputs": [
    {
     "data": {
      "text/html": [
       "<div>\n",
       "<style scoped>\n",
       "    .dataframe tbody tr th:only-of-type {\n",
       "        vertical-align: middle;\n",
       "    }\n",
       "\n",
       "    .dataframe tbody tr th {\n",
       "        vertical-align: top;\n",
       "    }\n",
       "\n",
       "    .dataframe thead th {\n",
       "        text-align: right;\n",
       "    }\n",
       "</style>\n",
       "<table border=\"1\" class=\"dataframe\">\n",
       "  <thead>\n",
       "    <tr style=\"text-align: right;\">\n",
       "      <th></th>\n",
       "      <th>_file</th>\n",
       "      <th>copyright</th>\n",
       "      <th>date</th>\n",
       "      <th>location</th>\n",
       "      <th>pano_id</th>\n",
       "      <th>status</th>\n",
       "      <th>Unnamed: 0</th>\n",
       "      <th>city</th>\n",
       "      <th>latitude</th>\n",
       "      <th>longitude</th>\n",
       "      <th>q-score</th>\n",
       "      <th>safety</th>\n",
       "      <th>Coordinates</th>\n",
       "      <th>OBJECTID</th>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>SUBDISTRIC</th>\n",
       "      <th></th>\n",
       "      <th></th>\n",
       "      <th></th>\n",
       "      <th></th>\n",
       "      <th></th>\n",
       "      <th></th>\n",
       "      <th></th>\n",
       "      <th></th>\n",
       "      <th></th>\n",
       "      <th></th>\n",
       "      <th></th>\n",
       "      <th></th>\n",
       "      <th></th>\n",
       "      <th></th>\n",
       "    </tr>\n",
       "  </thead>\n",
       "  <tbody>\n",
       "    <tr>\n",
       "      <th>Business</th>\n",
       "      <td>1067</td>\n",
       "      <td>1067</td>\n",
       "      <td>1062</td>\n",
       "      <td>1067</td>\n",
       "      <td>1067</td>\n",
       "      <td>1067</td>\n",
       "      <td>1067</td>\n",
       "      <td>1067</td>\n",
       "      <td>1067</td>\n",
       "      <td>1067</td>\n",
       "      <td>1067</td>\n",
       "      <td>1067</td>\n",
       "      <td>1067</td>\n",
       "      <td>1067</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>Comm/Instit</th>\n",
       "      <td>409</td>\n",
       "      <td>409</td>\n",
       "      <td>409</td>\n",
       "      <td>409</td>\n",
       "      <td>409</td>\n",
       "      <td>409</td>\n",
       "      <td>409</td>\n",
       "      <td>409</td>\n",
       "      <td>409</td>\n",
       "      <td>409</td>\n",
       "      <td>409</td>\n",
       "      <td>409</td>\n",
       "      <td>409</td>\n",
       "      <td>409</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>Industrial</th>\n",
       "      <td>2746</td>\n",
       "      <td>2746</td>\n",
       "      <td>2746</td>\n",
       "      <td>2746</td>\n",
       "      <td>2746</td>\n",
       "      <td>2746</td>\n",
       "      <td>2746</td>\n",
       "      <td>2746</td>\n",
       "      <td>2746</td>\n",
       "      <td>2746</td>\n",
       "      <td>2746</td>\n",
       "      <td>2746</td>\n",
       "      <td>2746</td>\n",
       "      <td>2746</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>Miscellaneous</th>\n",
       "      <td>863</td>\n",
       "      <td>863</td>\n",
       "      <td>863</td>\n",
       "      <td>863</td>\n",
       "      <td>863</td>\n",
       "      <td>863</td>\n",
       "      <td>863</td>\n",
       "      <td>863</td>\n",
       "      <td>863</td>\n",
       "      <td>863</td>\n",
       "      <td>863</td>\n",
       "      <td>863</td>\n",
       "      <td>863</td>\n",
       "      <td>863</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>Mixed Use</th>\n",
       "      <td>1309</td>\n",
       "      <td>1309</td>\n",
       "      <td>1303</td>\n",
       "      <td>1309</td>\n",
       "      <td>1309</td>\n",
       "      <td>1309</td>\n",
       "      <td>1309</td>\n",
       "      <td>1309</td>\n",
       "      <td>1309</td>\n",
       "      <td>1309</td>\n",
       "      <td>1309</td>\n",
       "      <td>1309</td>\n",
       "      <td>1309</td>\n",
       "      <td>1309</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>Open Space</th>\n",
       "      <td>3549</td>\n",
       "      <td>3549</td>\n",
       "      <td>3549</td>\n",
       "      <td>3549</td>\n",
       "      <td>3549</td>\n",
       "      <td>3549</td>\n",
       "      <td>3549</td>\n",
       "      <td>3549</td>\n",
       "      <td>3549</td>\n",
       "      <td>3549</td>\n",
       "      <td>3549</td>\n",
       "      <td>3549</td>\n",
       "      <td>3549</td>\n",
       "      <td>3549</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>Residential</th>\n",
       "      <td>9961</td>\n",
       "      <td>9961</td>\n",
       "      <td>9959</td>\n",
       "      <td>9961</td>\n",
       "      <td>9961</td>\n",
       "      <td>9961</td>\n",
       "      <td>9961</td>\n",
       "      <td>9961</td>\n",
       "      <td>9961</td>\n",
       "      <td>9961</td>\n",
       "      <td>9961</td>\n",
       "      <td>9961</td>\n",
       "      <td>9961</td>\n",
       "      <td>9961</td>\n",
       "    </tr>\n",
       "  </tbody>\n",
       "</table>\n",
       "</div>"
      ],
      "text/plain": [
       "               _file  copyright  date  location  pano_id  status  Unnamed: 0  \\\n",
       "SUBDISTRIC                                                                     \n",
       "Business        1067       1067  1062      1067     1067    1067        1067   \n",
       "Comm/Instit      409        409   409       409      409     409         409   \n",
       "Industrial      2746       2746  2746      2746     2746    2746        2746   \n",
       "Miscellaneous    863        863   863       863      863     863         863   \n",
       "Mixed Use       1309       1309  1303      1309     1309    1309        1309   \n",
       "Open Space      3549       3549  3549      3549     3549    3549        3549   \n",
       "Residential     9961       9961  9959      9961     9961    9961        9961   \n",
       "\n",
       "               city  latitude  longitude  q-score  safety  Coordinates  \\\n",
       "SUBDISTRIC                                                               \n",
       "Business       1067      1067       1067     1067    1067         1067   \n",
       "Comm/Instit     409       409        409      409     409          409   \n",
       "Industrial     2746      2746       2746     2746    2746         2746   \n",
       "Miscellaneous   863       863        863      863     863          863   \n",
       "Mixed Use      1309      1309       1309     1309    1309         1309   \n",
       "Open Space     3549      3549       3549     3549    3549         3549   \n",
       "Residential    9961      9961       9961     9961    9961         9961   \n",
       "\n",
       "               OBJECTID  \n",
       "SUBDISTRIC               \n",
       "Business           1067  \n",
       "Comm/Instit         409  \n",
       "Industrial         2746  \n",
       "Miscellaneous       863  \n",
       "Mixed Use          1309  \n",
       "Open Space         3549  \n",
       "Residential        9961  "
      ]
     },
     "execution_count": 36,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "image_fetched_with_target.groupby(['SUBDISTRIC']).count()"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "#### boston_safety_subsample: count by 'safety'"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 34,
   "metadata": {},
   "outputs": [
    {
     "data": {
      "text/html": [
       "<div>\n",
       "<style scoped>\n",
       "    .dataframe tbody tr th:only-of-type {\n",
       "        vertical-align: middle;\n",
       "    }\n",
       "\n",
       "    .dataframe tbody tr th {\n",
       "        vertical-align: top;\n",
       "    }\n",
       "\n",
       "    .dataframe thead th {\n",
       "        text-align: right;\n",
       "    }\n",
       "</style>\n",
       "<table border=\"1\" class=\"dataframe\">\n",
       "  <thead>\n",
       "    <tr style=\"text-align: right;\">\n",
       "      <th></th>\n",
       "      <th>Unnamed: 0</th>\n",
       "      <th>city</th>\n",
       "      <th>latitude</th>\n",
       "      <th>longitude</th>\n",
       "      <th>q-score</th>\n",
       "      <th>Coordinates</th>\n",
       "      <th>OBJECTID</th>\n",
       "      <th>SUBDISTRIC</th>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>safety</th>\n",
       "      <th></th>\n",
       "      <th></th>\n",
       "      <th></th>\n",
       "      <th></th>\n",
       "      <th></th>\n",
       "      <th></th>\n",
       "      <th></th>\n",
       "      <th></th>\n",
       "    </tr>\n",
       "  </thead>\n",
       "  <tbody>\n",
       "    <tr>\n",
       "      <th>0</th>\n",
       "      <td>10885</td>\n",
       "      <td>10885</td>\n",
       "      <td>10885</td>\n",
       "      <td>10885</td>\n",
       "      <td>10885</td>\n",
       "      <td>10885</td>\n",
       "      <td>10885</td>\n",
       "      <td>10885</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>1</th>\n",
       "      <td>9115</td>\n",
       "      <td>9115</td>\n",
       "      <td>9115</td>\n",
       "      <td>9115</td>\n",
       "      <td>9115</td>\n",
       "      <td>9115</td>\n",
       "      <td>9115</td>\n",
       "      <td>9115</td>\n",
       "    </tr>\n",
       "  </tbody>\n",
       "</table>\n",
       "</div>"
      ],
      "text/plain": [
       "        Unnamed: 0   city  latitude  longitude  q-score  Coordinates  \\\n",
       "safety                                                                 \n",
       "0            10885  10885     10885      10885    10885        10885   \n",
       "1             9115   9115      9115       9115     9115         9115   \n",
       "\n",
       "        OBJECTID  SUBDISTRIC  \n",
       "safety                        \n",
       "0          10885       10885  \n",
       "1           9115        9115  "
      ]
     },
     "execution_count": 34,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "boston_safety_subsample.groupby(['safety']).count()"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "#### image_fetched_with_target: count by 'safety'"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 38,
   "metadata": {},
   "outputs": [
    {
     "data": {
      "text/html": [
       "<div>\n",
       "<style scoped>\n",
       "    .dataframe tbody tr th:only-of-type {\n",
       "        vertical-align: middle;\n",
       "    }\n",
       "\n",
       "    .dataframe tbody tr th {\n",
       "        vertical-align: top;\n",
       "    }\n",
       "\n",
       "    .dataframe thead th {\n",
       "        text-align: right;\n",
       "    }\n",
       "</style>\n",
       "<table border=\"1\" class=\"dataframe\">\n",
       "  <thead>\n",
       "    <tr style=\"text-align: right;\">\n",
       "      <th></th>\n",
       "      <th>_file</th>\n",
       "      <th>copyright</th>\n",
       "      <th>date</th>\n",
       "      <th>location</th>\n",
       "      <th>pano_id</th>\n",
       "      <th>status</th>\n",
       "      <th>Unnamed: 0</th>\n",
       "      <th>city</th>\n",
       "      <th>latitude</th>\n",
       "      <th>longitude</th>\n",
       "      <th>q-score</th>\n",
       "      <th>Coordinates</th>\n",
       "      <th>OBJECTID</th>\n",
       "      <th>SUBDISTRIC</th>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>safety</th>\n",
       "      <th></th>\n",
       "      <th></th>\n",
       "      <th></th>\n",
       "      <th></th>\n",
       "      <th></th>\n",
       "      <th></th>\n",
       "      <th></th>\n",
       "      <th></th>\n",
       "      <th></th>\n",
       "      <th></th>\n",
       "      <th></th>\n",
       "      <th></th>\n",
       "      <th></th>\n",
       "      <th></th>\n",
       "    </tr>\n",
       "  </thead>\n",
       "  <tbody>\n",
       "    <tr>\n",
       "      <th>0</th>\n",
       "      <td>10821</td>\n",
       "      <td>10821</td>\n",
       "      <td>10816</td>\n",
       "      <td>10821</td>\n",
       "      <td>10821</td>\n",
       "      <td>10821</td>\n",
       "      <td>10821</td>\n",
       "      <td>10821</td>\n",
       "      <td>10821</td>\n",
       "      <td>10821</td>\n",
       "      <td>10821</td>\n",
       "      <td>10821</td>\n",
       "      <td>10821</td>\n",
       "      <td>10821</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>1</th>\n",
       "      <td>9083</td>\n",
       "      <td>9083</td>\n",
       "      <td>9075</td>\n",
       "      <td>9083</td>\n",
       "      <td>9083</td>\n",
       "      <td>9083</td>\n",
       "      <td>9083</td>\n",
       "      <td>9083</td>\n",
       "      <td>9083</td>\n",
       "      <td>9083</td>\n",
       "      <td>9083</td>\n",
       "      <td>9083</td>\n",
       "      <td>9083</td>\n",
       "      <td>9083</td>\n",
       "    </tr>\n",
       "  </tbody>\n",
       "</table>\n",
       "</div>"
      ],
      "text/plain": [
       "        _file  copyright   date  location  pano_id  status  Unnamed: 0   city  \\\n",
       "safety                                                                          \n",
       "0       10821      10821  10816     10821    10821   10821       10821  10821   \n",
       "1        9083       9083   9075      9083     9083    9083        9083   9083   \n",
       "\n",
       "        latitude  longitude  q-score  Coordinates  OBJECTID  SUBDISTRIC  \n",
       "safety                                                                   \n",
       "0          10821      10821    10821        10821     10821       10821  \n",
       "1           9083       9083     9083         9083      9083        9083  "
      ]
     },
     "execution_count": 38,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "image_fetched_with_target.groupby(['safety']).count()"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 50,
   "metadata": {},
   "outputs": [
    {
     "data": {
      "text/html": [
       "<div>\n",
       "<style scoped>\n",
       "    .dataframe tbody tr th:only-of-type {\n",
       "        vertical-align: middle;\n",
       "    }\n",
       "\n",
       "    .dataframe tbody tr th {\n",
       "        vertical-align: top;\n",
       "    }\n",
       "\n",
       "    .dataframe thead th {\n",
       "        text-align: right;\n",
       "    }\n",
       "</style>\n",
       "<table border=\"1\" class=\"dataframe\">\n",
       "  <thead>\n",
       "    <tr style=\"text-align: right;\">\n",
       "      <th></th>\n",
       "      <th>_file</th>\n",
       "      <th>copyright</th>\n",
       "      <th>date</th>\n",
       "      <th>location</th>\n",
       "      <th>pano_id</th>\n",
       "      <th>status</th>\n",
       "      <th>Unnamed: 0</th>\n",
       "      <th>city</th>\n",
       "      <th>latitude</th>\n",
       "      <th>longitude</th>\n",
       "      <th>q-score</th>\n",
       "      <th>safety</th>\n",
       "      <th>Coordinates</th>\n",
       "      <th>OBJECTID</th>\n",
       "      <th>SUBDISTRIC</th>\n",
       "    </tr>\n",
       "  </thead>\n",
       "  <tbody>\n",
       "    <tr>\n",
       "      <th>0</th>\n",
       "      <td>gsv_0.jpg</td>\n",
       "      <td>© Google</td>\n",
       "      <td>2018-08-01</td>\n",
       "      <td>{'lat': 42.34874, 'lng': -71.0714033}</td>\n",
       "      <td>6oZeECWwjS0xTzdsN-ZE7g</td>\n",
       "      <td>OK</td>\n",
       "      <td>25915</td>\n",
       "      <td>Boston</td>\n",
       "      <td>42.348724</td>\n",
       "      <td>-71.071495</td>\n",
       "      <td>28.634125</td>\n",
       "      <td>1</td>\n",
       "      <td>POINT (-71.071495 42.348724)</td>\n",
       "      <td>54998</td>\n",
       "      <td>Residential</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>1</th>\n",
       "      <td>gsv_1.jpg</td>\n",
       "      <td>© Google</td>\n",
       "      <td>2018-08-01</td>\n",
       "      <td>{'lat': 42.28859413668265, 'lng': -71.06564443...</td>\n",
       "      <td>q5dOW8BMAXU0vEtSKfa4yA</td>\n",
       "      <td>OK</td>\n",
       "      <td>1131</td>\n",
       "      <td>Boston</td>\n",
       "      <td>42.288597</td>\n",
       "      <td>-71.065681</td>\n",
       "      <td>26.525396</td>\n",
       "      <td>1</td>\n",
       "      <td>POINT (-71.06568100000001 42.288597)</td>\n",
       "      <td>55642</td>\n",
       "      <td>Residential</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>2</th>\n",
       "      <td>gsv_2.jpg</td>\n",
       "      <td>© Google</td>\n",
       "      <td>2017-07-01</td>\n",
       "      <td>{'lat': 42.2957334, 'lng': -71.1380628}</td>\n",
       "      <td>fsVE7knT_rhVkKqyAGbkyg</td>\n",
       "      <td>OK</td>\n",
       "      <td>121773</td>\n",
       "      <td>Boston</td>\n",
       "      <td>42.295563</td>\n",
       "      <td>-71.138023</td>\n",
       "      <td>29.614868</td>\n",
       "      <td>1</td>\n",
       "      <td>POINT (-71.138023 42.295563)</td>\n",
       "      <td>54450</td>\n",
       "      <td>Residential</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>3</th>\n",
       "      <td>gsv_3.jpg</td>\n",
       "      <td>© Google</td>\n",
       "      <td>2018-08-01</td>\n",
       "      <td>{'lat': 42.31308354620529, 'lng': -71.07641430...</td>\n",
       "      <td>AJ7cTQ8rL1aADzsM11K39A</td>\n",
       "      <td>OK</td>\n",
       "      <td>7005</td>\n",
       "      <td>Boston</td>\n",
       "      <td>42.312973</td>\n",
       "      <td>-71.076004</td>\n",
       "      <td>30.076191</td>\n",
       "      <td>1</td>\n",
       "      <td>POINT (-71.076004 42.312973)</td>\n",
       "      <td>55523</td>\n",
       "      <td>Residential</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>4</th>\n",
       "      <td>gsv_4.jpg</td>\n",
       "      <td>© Google</td>\n",
       "      <td>2018-08-01</td>\n",
       "      <td>{'lat': 42.3112202, 'lng': -71.0601081}</td>\n",
       "      <td>MnI2F0n9yqnIGie2rQSAZw</td>\n",
       "      <td>OK</td>\n",
       "      <td>6342</td>\n",
       "      <td>Boston</td>\n",
       "      <td>42.311348</td>\n",
       "      <td>-71.060051</td>\n",
       "      <td>26.038879</td>\n",
       "      <td>1</td>\n",
       "      <td>POINT (-71.060051 42.311348)</td>\n",
       "      <td>55604</td>\n",
       "      <td>Residential</td>\n",
       "    </tr>\n",
       "  </tbody>\n",
       "</table>\n",
       "</div>"
      ],
      "text/plain": [
       "       _file copyright       date  \\\n",
       "0  gsv_0.jpg  © Google 2018-08-01   \n",
       "1  gsv_1.jpg  © Google 2018-08-01   \n",
       "2  gsv_2.jpg  © Google 2017-07-01   \n",
       "3  gsv_3.jpg  © Google 2018-08-01   \n",
       "4  gsv_4.jpg  © Google 2018-08-01   \n",
       "\n",
       "                                            location                 pano_id  \\\n",
       "0              {'lat': 42.34874, 'lng': -71.0714033}  6oZeECWwjS0xTzdsN-ZE7g   \n",
       "1  {'lat': 42.28859413668265, 'lng': -71.06564443...  q5dOW8BMAXU0vEtSKfa4yA   \n",
       "2            {'lat': 42.2957334, 'lng': -71.1380628}  fsVE7knT_rhVkKqyAGbkyg   \n",
       "3  {'lat': 42.31308354620529, 'lng': -71.07641430...  AJ7cTQ8rL1aADzsM11K39A   \n",
       "4            {'lat': 42.3112202, 'lng': -71.0601081}  MnI2F0n9yqnIGie2rQSAZw   \n",
       "\n",
       "  status  Unnamed: 0    city   latitude  longitude    q-score  safety  \\\n",
       "0     OK       25915  Boston  42.348724 -71.071495  28.634125       1   \n",
       "1     OK        1131  Boston  42.288597 -71.065681  26.525396       1   \n",
       "2     OK      121773  Boston  42.295563 -71.138023  29.614868       1   \n",
       "3     OK        7005  Boston  42.312973 -71.076004  30.076191       1   \n",
       "4     OK        6342  Boston  42.311348 -71.060051  26.038879       1   \n",
       "\n",
       "                            Coordinates  OBJECTID   SUBDISTRIC  \n",
       "0          POINT (-71.071495 42.348724)     54998  Residential  \n",
       "1  POINT (-71.06568100000001 42.288597)     55642  Residential  \n",
       "2          POINT (-71.138023 42.295563)     54450  Residential  \n",
       "3          POINT (-71.076004 42.312973)     55523  Residential  \n",
       "4          POINT (-71.060051 42.311348)     55604  Residential  "
      ]
     },
     "execution_count": 50,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "image_fetched_with_target.head(5)"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 51,
   "metadata": {},
   "outputs": [],
   "source": [
    "image_fetched_with_target.to_csv(\"~/Desktop/ML1030/us_safety/boston19904image_with_target.csv\")"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "### For the 19904 samples, split it into 80: 20 percent"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 46,
   "metadata": {},
   "outputs": [],
   "source": [
    "from sklearn.model_selection import train_test_split"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 47,
   "metadata": {},
   "outputs": [],
   "source": [
    "train, test = train_test_split(image_fetched_with_target, test_size=0.2)"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "### Examine Train set's portion of safey and subdistrict"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 49,
   "metadata": {},
   "outputs": [
    {
     "data": {
      "text/html": [
       "<div>\n",
       "<style scoped>\n",
       "    .dataframe tbody tr th:only-of-type {\n",
       "        vertical-align: middle;\n",
       "    }\n",
       "\n",
       "    .dataframe tbody tr th {\n",
       "        vertical-align: top;\n",
       "    }\n",
       "\n",
       "    .dataframe thead th {\n",
       "        text-align: right;\n",
       "    }\n",
       "</style>\n",
       "<table border=\"1\" class=\"dataframe\">\n",
       "  <thead>\n",
       "    <tr style=\"text-align: right;\">\n",
       "      <th></th>\n",
       "      <th></th>\n",
       "      <th>_file</th>\n",
       "      <th>copyright</th>\n",
       "      <th>date</th>\n",
       "      <th>location</th>\n",
       "      <th>pano_id</th>\n",
       "      <th>status</th>\n",
       "      <th>Unnamed: 0</th>\n",
       "      <th>city</th>\n",
       "      <th>latitude</th>\n",
       "      <th>longitude</th>\n",
       "      <th>q-score</th>\n",
       "      <th>Coordinates</th>\n",
       "      <th>OBJECTID</th>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>SUBDISTRIC</th>\n",
       "      <th>safety</th>\n",
       "      <th></th>\n",
       "      <th></th>\n",
       "      <th></th>\n",
       "      <th></th>\n",
       "      <th></th>\n",
       "      <th></th>\n",
       "      <th></th>\n",
       "      <th></th>\n",
       "      <th></th>\n",
       "      <th></th>\n",
       "      <th></th>\n",
       "      <th></th>\n",
       "      <th></th>\n",
       "    </tr>\n",
       "  </thead>\n",
       "  <tbody>\n",
       "    <tr>\n",
       "      <th rowspan=\"2\" valign=\"top\">Business</th>\n",
       "      <th>0</th>\n",
       "      <td>427</td>\n",
       "      <td>427</td>\n",
       "      <td>427</td>\n",
       "      <td>427</td>\n",
       "      <td>427</td>\n",
       "      <td>427</td>\n",
       "      <td>427</td>\n",
       "      <td>427</td>\n",
       "      <td>427</td>\n",
       "      <td>427</td>\n",
       "      <td>427</td>\n",
       "      <td>427</td>\n",
       "      <td>427</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>1</th>\n",
       "      <td>424</td>\n",
       "      <td>424</td>\n",
       "      <td>420</td>\n",
       "      <td>424</td>\n",
       "      <td>424</td>\n",
       "      <td>424</td>\n",
       "      <td>424</td>\n",
       "      <td>424</td>\n",
       "      <td>424</td>\n",
       "      <td>424</td>\n",
       "      <td>424</td>\n",
       "      <td>424</td>\n",
       "      <td>424</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th rowspan=\"2\" valign=\"top\">Comm/Instit</th>\n",
       "      <th>0</th>\n",
       "      <td>164</td>\n",
       "      <td>164</td>\n",
       "      <td>164</td>\n",
       "      <td>164</td>\n",
       "      <td>164</td>\n",
       "      <td>164</td>\n",
       "      <td>164</td>\n",
       "      <td>164</td>\n",
       "      <td>164</td>\n",
       "      <td>164</td>\n",
       "      <td>164</td>\n",
       "      <td>164</td>\n",
       "      <td>164</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>1</th>\n",
       "      <td>177</td>\n",
       "      <td>177</td>\n",
       "      <td>177</td>\n",
       "      <td>177</td>\n",
       "      <td>177</td>\n",
       "      <td>177</td>\n",
       "      <td>177</td>\n",
       "      <td>177</td>\n",
       "      <td>177</td>\n",
       "      <td>177</td>\n",
       "      <td>177</td>\n",
       "      <td>177</td>\n",
       "      <td>177</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th rowspan=\"2\" valign=\"top\">Industrial</th>\n",
       "      <th>0</th>\n",
       "      <td>1837</td>\n",
       "      <td>1837</td>\n",
       "      <td>1837</td>\n",
       "      <td>1837</td>\n",
       "      <td>1837</td>\n",
       "      <td>1837</td>\n",
       "      <td>1837</td>\n",
       "      <td>1837</td>\n",
       "      <td>1837</td>\n",
       "      <td>1837</td>\n",
       "      <td>1837</td>\n",
       "      <td>1837</td>\n",
       "      <td>1837</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>1</th>\n",
       "      <td>391</td>\n",
       "      <td>391</td>\n",
       "      <td>391</td>\n",
       "      <td>391</td>\n",
       "      <td>391</td>\n",
       "      <td>391</td>\n",
       "      <td>391</td>\n",
       "      <td>391</td>\n",
       "      <td>391</td>\n",
       "      <td>391</td>\n",
       "      <td>391</td>\n",
       "      <td>391</td>\n",
       "      <td>391</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th rowspan=\"2\" valign=\"top\">Miscellaneous</th>\n",
       "      <th>0</th>\n",
       "      <td>338</td>\n",
       "      <td>338</td>\n",
       "      <td>338</td>\n",
       "      <td>338</td>\n",
       "      <td>338</td>\n",
       "      <td>338</td>\n",
       "      <td>338</td>\n",
       "      <td>338</td>\n",
       "      <td>338</td>\n",
       "      <td>338</td>\n",
       "      <td>338</td>\n",
       "      <td>338</td>\n",
       "      <td>338</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>1</th>\n",
       "      <td>341</td>\n",
       "      <td>341</td>\n",
       "      <td>341</td>\n",
       "      <td>341</td>\n",
       "      <td>341</td>\n",
       "      <td>341</td>\n",
       "      <td>341</td>\n",
       "      <td>341</td>\n",
       "      <td>341</td>\n",
       "      <td>341</td>\n",
       "      <td>341</td>\n",
       "      <td>341</td>\n",
       "      <td>341</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th rowspan=\"2\" valign=\"top\">Mixed Use</th>\n",
       "      <th>0</th>\n",
       "      <td>544</td>\n",
       "      <td>544</td>\n",
       "      <td>542</td>\n",
       "      <td>544</td>\n",
       "      <td>544</td>\n",
       "      <td>544</td>\n",
       "      <td>544</td>\n",
       "      <td>544</td>\n",
       "      <td>544</td>\n",
       "      <td>544</td>\n",
       "      <td>544</td>\n",
       "      <td>544</td>\n",
       "      <td>544</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>1</th>\n",
       "      <td>537</td>\n",
       "      <td>537</td>\n",
       "      <td>534</td>\n",
       "      <td>537</td>\n",
       "      <td>537</td>\n",
       "      <td>537</td>\n",
       "      <td>537</td>\n",
       "      <td>537</td>\n",
       "      <td>537</td>\n",
       "      <td>537</td>\n",
       "      <td>537</td>\n",
       "      <td>537</td>\n",
       "      <td>537</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th rowspan=\"2\" valign=\"top\">Open Space</th>\n",
       "      <th>0</th>\n",
       "      <td>1441</td>\n",
       "      <td>1441</td>\n",
       "      <td>1441</td>\n",
       "      <td>1441</td>\n",
       "      <td>1441</td>\n",
       "      <td>1441</td>\n",
       "      <td>1441</td>\n",
       "      <td>1441</td>\n",
       "      <td>1441</td>\n",
       "      <td>1441</td>\n",
       "      <td>1441</td>\n",
       "      <td>1441</td>\n",
       "      <td>1441</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>1</th>\n",
       "      <td>1400</td>\n",
       "      <td>1400</td>\n",
       "      <td>1400</td>\n",
       "      <td>1400</td>\n",
       "      <td>1400</td>\n",
       "      <td>1400</td>\n",
       "      <td>1400</td>\n",
       "      <td>1400</td>\n",
       "      <td>1400</td>\n",
       "      <td>1400</td>\n",
       "      <td>1400</td>\n",
       "      <td>1400</td>\n",
       "      <td>1400</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th rowspan=\"2\" valign=\"top\">Residential</th>\n",
       "      <th>0</th>\n",
       "      <td>3951</td>\n",
       "      <td>3951</td>\n",
       "      <td>3950</td>\n",
       "      <td>3951</td>\n",
       "      <td>3951</td>\n",
       "      <td>3951</td>\n",
       "      <td>3951</td>\n",
       "      <td>3951</td>\n",
       "      <td>3951</td>\n",
       "      <td>3951</td>\n",
       "      <td>3951</td>\n",
       "      <td>3951</td>\n",
       "      <td>3951</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>1</th>\n",
       "      <td>3951</td>\n",
       "      <td>3951</td>\n",
       "      <td>3950</td>\n",
       "      <td>3951</td>\n",
       "      <td>3951</td>\n",
       "      <td>3951</td>\n",
       "      <td>3951</td>\n",
       "      <td>3951</td>\n",
       "      <td>3951</td>\n",
       "      <td>3951</td>\n",
       "      <td>3951</td>\n",
       "      <td>3951</td>\n",
       "      <td>3951</td>\n",
       "    </tr>\n",
       "  </tbody>\n",
       "</table>\n",
       "</div>"
      ],
      "text/plain": [
       "                      _file  copyright  date  location  pano_id  status  \\\n",
       "SUBDISTRIC    safety                                                      \n",
       "Business      0         427        427   427       427      427     427   \n",
       "              1         424        424   420       424      424     424   \n",
       "Comm/Instit   0         164        164   164       164      164     164   \n",
       "              1         177        177   177       177      177     177   \n",
       "Industrial    0        1837       1837  1837      1837     1837    1837   \n",
       "              1         391        391   391       391      391     391   \n",
       "Miscellaneous 0         338        338   338       338      338     338   \n",
       "              1         341        341   341       341      341     341   \n",
       "Mixed Use     0         544        544   542       544      544     544   \n",
       "              1         537        537   534       537      537     537   \n",
       "Open Space    0        1441       1441  1441      1441     1441    1441   \n",
       "              1        1400       1400  1400      1400     1400    1400   \n",
       "Residential   0        3951       3951  3950      3951     3951    3951   \n",
       "              1        3951       3951  3950      3951     3951    3951   \n",
       "\n",
       "                      Unnamed: 0  city  latitude  longitude  q-score  \\\n",
       "SUBDISTRIC    safety                                                   \n",
       "Business      0              427   427       427        427      427   \n",
       "              1              424   424       424        424      424   \n",
       "Comm/Instit   0              164   164       164        164      164   \n",
       "              1              177   177       177        177      177   \n",
       "Industrial    0             1837  1837      1837       1837     1837   \n",
       "              1              391   391       391        391      391   \n",
       "Miscellaneous 0              338   338       338        338      338   \n",
       "              1              341   341       341        341      341   \n",
       "Mixed Use     0              544   544       544        544      544   \n",
       "              1              537   537       537        537      537   \n",
       "Open Space    0             1441  1441      1441       1441     1441   \n",
       "              1             1400  1400      1400       1400     1400   \n",
       "Residential   0             3951  3951      3951       3951     3951   \n",
       "              1             3951  3951      3951       3951     3951   \n",
       "\n",
       "                      Coordinates  OBJECTID  \n",
       "SUBDISTRIC    safety                         \n",
       "Business      0               427       427  \n",
       "              1               424       424  \n",
       "Comm/Instit   0               164       164  \n",
       "              1               177       177  \n",
       "Industrial    0              1837      1837  \n",
       "              1               391       391  \n",
       "Miscellaneous 0               338       338  \n",
       "              1               341       341  \n",
       "Mixed Use     0               544       544  \n",
       "              1               537       537  \n",
       "Open Space    0              1441      1441  \n",
       "              1              1400      1400  \n",
       "Residential   0              3951      3951  \n",
       "              1              3951      3951  "
      ]
     },
     "execution_count": 49,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "train.groupby(['SUBDISTRIC','safety']).count()"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 52,
   "metadata": {},
   "outputs": [
    {
     "data": {
      "text/html": [
       "<div>\n",
       "<style scoped>\n",
       "    .dataframe tbody tr th:only-of-type {\n",
       "        vertical-align: middle;\n",
       "    }\n",
       "\n",
       "    .dataframe tbody tr th {\n",
       "        vertical-align: top;\n",
       "    }\n",
       "\n",
       "    .dataframe thead th {\n",
       "        text-align: right;\n",
       "    }\n",
       "</style>\n",
       "<table border=\"1\" class=\"dataframe\">\n",
       "  <thead>\n",
       "    <tr style=\"text-align: right;\">\n",
       "      <th></th>\n",
       "      <th>_file</th>\n",
       "      <th>copyright</th>\n",
       "      <th>date</th>\n",
       "      <th>location</th>\n",
       "      <th>pano_id</th>\n",
       "      <th>status</th>\n",
       "      <th>Unnamed: 0</th>\n",
       "      <th>city</th>\n",
       "      <th>latitude</th>\n",
       "      <th>longitude</th>\n",
       "      <th>q-score</th>\n",
       "      <th>safety</th>\n",
       "      <th>Coordinates</th>\n",
       "      <th>OBJECTID</th>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>SUBDISTRIC</th>\n",
       "      <th></th>\n",
       "      <th></th>\n",
       "      <th></th>\n",
       "      <th></th>\n",
       "      <th></th>\n",
       "      <th></th>\n",
       "      <th></th>\n",
       "      <th></th>\n",
       "      <th></th>\n",
       "      <th></th>\n",
       "      <th></th>\n",
       "      <th></th>\n",
       "      <th></th>\n",
       "      <th></th>\n",
       "    </tr>\n",
       "  </thead>\n",
       "  <tbody>\n",
       "    <tr>\n",
       "      <th>Business</th>\n",
       "      <td>851</td>\n",
       "      <td>851</td>\n",
       "      <td>847</td>\n",
       "      <td>851</td>\n",
       "      <td>851</td>\n",
       "      <td>851</td>\n",
       "      <td>851</td>\n",
       "      <td>851</td>\n",
       "      <td>851</td>\n",
       "      <td>851</td>\n",
       "      <td>851</td>\n",
       "      <td>851</td>\n",
       "      <td>851</td>\n",
       "      <td>851</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>Comm/Instit</th>\n",
       "      <td>341</td>\n",
       "      <td>341</td>\n",
       "      <td>341</td>\n",
       "      <td>341</td>\n",
       "      <td>341</td>\n",
       "      <td>341</td>\n",
       "      <td>341</td>\n",
       "      <td>341</td>\n",
       "      <td>341</td>\n",
       "      <td>341</td>\n",
       "      <td>341</td>\n",
       "      <td>341</td>\n",
       "      <td>341</td>\n",
       "      <td>341</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>Industrial</th>\n",
       "      <td>2228</td>\n",
       "      <td>2228</td>\n",
       "      <td>2228</td>\n",
       "      <td>2228</td>\n",
       "      <td>2228</td>\n",
       "      <td>2228</td>\n",
       "      <td>2228</td>\n",
       "      <td>2228</td>\n",
       "      <td>2228</td>\n",
       "      <td>2228</td>\n",
       "      <td>2228</td>\n",
       "      <td>2228</td>\n",
       "      <td>2228</td>\n",
       "      <td>2228</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>Miscellaneous</th>\n",
       "      <td>679</td>\n",
       "      <td>679</td>\n",
       "      <td>679</td>\n",
       "      <td>679</td>\n",
       "      <td>679</td>\n",
       "      <td>679</td>\n",
       "      <td>679</td>\n",
       "      <td>679</td>\n",
       "      <td>679</td>\n",
       "      <td>679</td>\n",
       "      <td>679</td>\n",
       "      <td>679</td>\n",
       "      <td>679</td>\n",
       "      <td>679</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>Mixed Use</th>\n",
       "      <td>1081</td>\n",
       "      <td>1081</td>\n",
       "      <td>1076</td>\n",
       "      <td>1081</td>\n",
       "      <td>1081</td>\n",
       "      <td>1081</td>\n",
       "      <td>1081</td>\n",
       "      <td>1081</td>\n",
       "      <td>1081</td>\n",
       "      <td>1081</td>\n",
       "      <td>1081</td>\n",
       "      <td>1081</td>\n",
       "      <td>1081</td>\n",
       "      <td>1081</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>Open Space</th>\n",
       "      <td>2841</td>\n",
       "      <td>2841</td>\n",
       "      <td>2841</td>\n",
       "      <td>2841</td>\n",
       "      <td>2841</td>\n",
       "      <td>2841</td>\n",
       "      <td>2841</td>\n",
       "      <td>2841</td>\n",
       "      <td>2841</td>\n",
       "      <td>2841</td>\n",
       "      <td>2841</td>\n",
       "      <td>2841</td>\n",
       "      <td>2841</td>\n",
       "      <td>2841</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>Residential</th>\n",
       "      <td>7902</td>\n",
       "      <td>7902</td>\n",
       "      <td>7900</td>\n",
       "      <td>7902</td>\n",
       "      <td>7902</td>\n",
       "      <td>7902</td>\n",
       "      <td>7902</td>\n",
       "      <td>7902</td>\n",
       "      <td>7902</td>\n",
       "      <td>7902</td>\n",
       "      <td>7902</td>\n",
       "      <td>7902</td>\n",
       "      <td>7902</td>\n",
       "      <td>7902</td>\n",
       "    </tr>\n",
       "  </tbody>\n",
       "</table>\n",
       "</div>"
      ],
      "text/plain": [
       "               _file  copyright  date  location  pano_id  status  Unnamed: 0  \\\n",
       "SUBDISTRIC                                                                     \n",
       "Business         851        851   847       851      851     851         851   \n",
       "Comm/Instit      341        341   341       341      341     341         341   \n",
       "Industrial      2228       2228  2228      2228     2228    2228        2228   \n",
       "Miscellaneous    679        679   679       679      679     679         679   \n",
       "Mixed Use       1081       1081  1076      1081     1081    1081        1081   \n",
       "Open Space      2841       2841  2841      2841     2841    2841        2841   \n",
       "Residential     7902       7902  7900      7902     7902    7902        7902   \n",
       "\n",
       "               city  latitude  longitude  q-score  safety  Coordinates  \\\n",
       "SUBDISTRIC                                                               \n",
       "Business        851       851        851      851     851          851   \n",
       "Comm/Instit     341       341        341      341     341          341   \n",
       "Industrial     2228      2228       2228     2228    2228         2228   \n",
       "Miscellaneous   679       679        679      679     679          679   \n",
       "Mixed Use      1081      1081       1081     1081    1081         1081   \n",
       "Open Space     2841      2841       2841     2841    2841         2841   \n",
       "Residential    7902      7902       7902     7902    7902         7902   \n",
       "\n",
       "               OBJECTID  \n",
       "SUBDISTRIC               \n",
       "Business            851  \n",
       "Comm/Instit         341  \n",
       "Industrial         2228  \n",
       "Miscellaneous       679  \n",
       "Mixed Use          1081  \n",
       "Open Space         2841  \n",
       "Residential        7902  "
      ]
     },
     "execution_count": 52,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "train.groupby(['SUBDISTRIC']).count()"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 74,
   "metadata": {},
   "outputs": [
    {
     "data": {
      "text/html": [
       "<div>\n",
       "<style scoped>\n",
       "    .dataframe tbody tr th:only-of-type {\n",
       "        vertical-align: middle;\n",
       "    }\n",
       "\n",
       "    .dataframe tbody tr th {\n",
       "        vertical-align: top;\n",
       "    }\n",
       "\n",
       "    .dataframe thead th {\n",
       "        text-align: right;\n",
       "    }\n",
       "</style>\n",
       "<table border=\"1\" class=\"dataframe\">\n",
       "  <thead>\n",
       "    <tr style=\"text-align: right;\">\n",
       "      <th></th>\n",
       "      <th>_file</th>\n",
       "      <th>copyright</th>\n",
       "      <th>date</th>\n",
       "      <th>location</th>\n",
       "      <th>pano_id</th>\n",
       "      <th>status</th>\n",
       "      <th>Unnamed: 0</th>\n",
       "      <th>city</th>\n",
       "      <th>latitude</th>\n",
       "      <th>longitude</th>\n",
       "      <th>q-score</th>\n",
       "      <th>Coordinates</th>\n",
       "      <th>OBJECTID</th>\n",
       "      <th>SUBDISTRIC</th>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>safety</th>\n",
       "      <th></th>\n",
       "      <th></th>\n",
       "      <th></th>\n",
       "      <th></th>\n",
       "      <th></th>\n",
       "      <th></th>\n",
       "      <th></th>\n",
       "      <th></th>\n",
       "      <th></th>\n",
       "      <th></th>\n",
       "      <th></th>\n",
       "      <th></th>\n",
       "      <th></th>\n",
       "      <th></th>\n",
       "    </tr>\n",
       "  </thead>\n",
       "  <tbody>\n",
       "    <tr>\n",
       "      <th>0</th>\n",
       "      <td>8702</td>\n",
       "      <td>8702</td>\n",
       "      <td>8699</td>\n",
       "      <td>8702</td>\n",
       "      <td>8702</td>\n",
       "      <td>8702</td>\n",
       "      <td>8702</td>\n",
       "      <td>8702</td>\n",
       "      <td>8702</td>\n",
       "      <td>8702</td>\n",
       "      <td>8702</td>\n",
       "      <td>8702</td>\n",
       "      <td>8702</td>\n",
       "      <td>8702</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>1</th>\n",
       "      <td>7221</td>\n",
       "      <td>7221</td>\n",
       "      <td>7213</td>\n",
       "      <td>7221</td>\n",
       "      <td>7221</td>\n",
       "      <td>7221</td>\n",
       "      <td>7221</td>\n",
       "      <td>7221</td>\n",
       "      <td>7221</td>\n",
       "      <td>7221</td>\n",
       "      <td>7221</td>\n",
       "      <td>7221</td>\n",
       "      <td>7221</td>\n",
       "      <td>7221</td>\n",
       "    </tr>\n",
       "  </tbody>\n",
       "</table>\n",
       "</div>"
      ],
      "text/plain": [
       "        _file  copyright  date  location  pano_id  status  Unnamed: 0  city  \\\n",
       "safety                                                                        \n",
       "0        8702       8702  8699      8702     8702    8702        8702  8702   \n",
       "1        7221       7221  7213      7221     7221    7221        7221  7221   \n",
       "\n",
       "        latitude  longitude  q-score  Coordinates  OBJECTID  SUBDISTRIC  \n",
       "safety                                                                   \n",
       "0           8702       8702     8702         8702      8702        8702  \n",
       "1           7221       7221     7221         7221      7221        7221  "
      ]
     },
     "execution_count": 74,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "train.groupby(['safety']).count()"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "### Train set's portion of safey and subdistrict is similar to that of 'boston_safety_subsample'"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 61,
   "metadata": {},
   "outputs": [
    {
     "data": {
      "text/plain": [
       "SUBDISTRIC\n",
       "Business         0.053445\n",
       "Comm/Instit      0.021416\n",
       "Industrial       0.139923\n",
       "Miscellaneous    0.042643\n",
       "Mixed Use        0.067889\n",
       "Open Space       0.178421\n",
       "Residential      0.496263\n",
       "Name: _file, dtype: float64"
      ]
     },
     "execution_count": 61,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "train.groupby(['SUBDISTRIC']).count()['_file'] / train.groupby(['SUBDISTRIC']).count()['_file'].sum()"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 75,
   "metadata": {},
   "outputs": [
    {
     "data": {
      "text/plain": [
       "safety\n",
       "0    0.546505\n",
       "1    0.453495\n",
       "Name: _file, dtype: float64"
      ]
     },
     "execution_count": 75,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "train.groupby(['safety']).count()['_file'] / train.groupby(['safety']).count()['_file'].sum()"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 77,
   "metadata": {},
   "outputs": [
    {
     "data": {
      "text/plain": [
       "SUBDISTRIC\n",
       "Business         0.05340\n",
       "Comm/Instit      0.02100\n",
       "Industrial       0.13900\n",
       "Miscellaneous    0.04335\n",
       "Mixed Use        0.06575\n",
       "Open Space       0.17860\n",
       "Residential      0.49890\n",
       "Name: Unnamed: 0, dtype: float64"
      ]
     },
     "execution_count": 77,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "boston_safety_subsample.groupby(['SUBDISTRIC']).count()['Unnamed: 0'] / boston_safety_subsample.groupby(['SUBDISTRIC']).count()['Unnamed: 0'].sum()"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 76,
   "metadata": {},
   "outputs": [
    {
     "data": {
      "text/plain": [
       "safety\n",
       "0    0.54425\n",
       "1    0.45575\n",
       "Name: Unnamed: 0, dtype: float64"
      ]
     },
     "execution_count": 76,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "boston_safety_subsample.groupby(['safety']).count()['Unnamed: 0'] / boston_safety_subsample.groupby(['safety']).count()['Unnamed: 0'].sum()"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "### Examine Test set's portion of safey and subdistrict"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 71,
   "metadata": {},
   "outputs": [
    {
     "data": {
      "text/html": [
       "<div>\n",
       "<style scoped>\n",
       "    .dataframe tbody tr th:only-of-type {\n",
       "        vertical-align: middle;\n",
       "    }\n",
       "\n",
       "    .dataframe tbody tr th {\n",
       "        vertical-align: top;\n",
       "    }\n",
       "\n",
       "    .dataframe thead th {\n",
       "        text-align: right;\n",
       "    }\n",
       "</style>\n",
       "<table border=\"1\" class=\"dataframe\">\n",
       "  <thead>\n",
       "    <tr style=\"text-align: right;\">\n",
       "      <th></th>\n",
       "      <th></th>\n",
       "      <th>_file</th>\n",
       "      <th>copyright</th>\n",
       "      <th>date</th>\n",
       "      <th>location</th>\n",
       "      <th>pano_id</th>\n",
       "      <th>status</th>\n",
       "      <th>Unnamed: 0</th>\n",
       "      <th>city</th>\n",
       "      <th>latitude</th>\n",
       "      <th>longitude</th>\n",
       "      <th>q-score</th>\n",
       "      <th>Coordinates</th>\n",
       "      <th>OBJECTID</th>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>SUBDISTRIC</th>\n",
       "      <th>safety</th>\n",
       "      <th></th>\n",
       "      <th></th>\n",
       "      <th></th>\n",
       "      <th></th>\n",
       "      <th></th>\n",
       "      <th></th>\n",
       "      <th></th>\n",
       "      <th></th>\n",
       "      <th></th>\n",
       "      <th></th>\n",
       "      <th></th>\n",
       "      <th></th>\n",
       "      <th></th>\n",
       "    </tr>\n",
       "  </thead>\n",
       "  <tbody>\n",
       "    <tr>\n",
       "      <th rowspan=\"2\" valign=\"top\">Business</th>\n",
       "      <th>0</th>\n",
       "      <td>107</td>\n",
       "      <td>107</td>\n",
       "      <td>106</td>\n",
       "      <td>107</td>\n",
       "      <td>107</td>\n",
       "      <td>107</td>\n",
       "      <td>107</td>\n",
       "      <td>107</td>\n",
       "      <td>107</td>\n",
       "      <td>107</td>\n",
       "      <td>107</td>\n",
       "      <td>107</td>\n",
       "      <td>107</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>1</th>\n",
       "      <td>109</td>\n",
       "      <td>109</td>\n",
       "      <td>109</td>\n",
       "      <td>109</td>\n",
       "      <td>109</td>\n",
       "      <td>109</td>\n",
       "      <td>109</td>\n",
       "      <td>109</td>\n",
       "      <td>109</td>\n",
       "      <td>109</td>\n",
       "      <td>109</td>\n",
       "      <td>109</td>\n",
       "      <td>109</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th rowspan=\"2\" valign=\"top\">Comm/Instit</th>\n",
       "      <th>0</th>\n",
       "      <td>36</td>\n",
       "      <td>36</td>\n",
       "      <td>36</td>\n",
       "      <td>36</td>\n",
       "      <td>36</td>\n",
       "      <td>36</td>\n",
       "      <td>36</td>\n",
       "      <td>36</td>\n",
       "      <td>36</td>\n",
       "      <td>36</td>\n",
       "      <td>36</td>\n",
       "      <td>36</td>\n",
       "      <td>36</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>1</th>\n",
       "      <td>32</td>\n",
       "      <td>32</td>\n",
       "      <td>32</td>\n",
       "      <td>32</td>\n",
       "      <td>32</td>\n",
       "      <td>32</td>\n",
       "      <td>32</td>\n",
       "      <td>32</td>\n",
       "      <td>32</td>\n",
       "      <td>32</td>\n",
       "      <td>32</td>\n",
       "      <td>32</td>\n",
       "      <td>32</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th rowspan=\"2\" valign=\"top\">Industrial</th>\n",
       "      <th>0</th>\n",
       "      <td>412</td>\n",
       "      <td>412</td>\n",
       "      <td>412</td>\n",
       "      <td>412</td>\n",
       "      <td>412</td>\n",
       "      <td>412</td>\n",
       "      <td>412</td>\n",
       "      <td>412</td>\n",
       "      <td>412</td>\n",
       "      <td>412</td>\n",
       "      <td>412</td>\n",
       "      <td>412</td>\n",
       "      <td>412</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>1</th>\n",
       "      <td>106</td>\n",
       "      <td>106</td>\n",
       "      <td>106</td>\n",
       "      <td>106</td>\n",
       "      <td>106</td>\n",
       "      <td>106</td>\n",
       "      <td>106</td>\n",
       "      <td>106</td>\n",
       "      <td>106</td>\n",
       "      <td>106</td>\n",
       "      <td>106</td>\n",
       "      <td>106</td>\n",
       "      <td>106</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th rowspan=\"2\" valign=\"top\">Miscellaneous</th>\n",
       "      <th>0</th>\n",
       "      <td>88</td>\n",
       "      <td>88</td>\n",
       "      <td>88</td>\n",
       "      <td>88</td>\n",
       "      <td>88</td>\n",
       "      <td>88</td>\n",
       "      <td>88</td>\n",
       "      <td>88</td>\n",
       "      <td>88</td>\n",
       "      <td>88</td>\n",
       "      <td>88</td>\n",
       "      <td>88</td>\n",
       "      <td>88</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>1</th>\n",
       "      <td>96</td>\n",
       "      <td>96</td>\n",
       "      <td>96</td>\n",
       "      <td>96</td>\n",
       "      <td>96</td>\n",
       "      <td>96</td>\n",
       "      <td>96</td>\n",
       "      <td>96</td>\n",
       "      <td>96</td>\n",
       "      <td>96</td>\n",
       "      <td>96</td>\n",
       "      <td>96</td>\n",
       "      <td>96</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th rowspan=\"2\" valign=\"top\">Mixed Use</th>\n",
       "      <th>0</th>\n",
       "      <td>116</td>\n",
       "      <td>116</td>\n",
       "      <td>115</td>\n",
       "      <td>116</td>\n",
       "      <td>116</td>\n",
       "      <td>116</td>\n",
       "      <td>116</td>\n",
       "      <td>116</td>\n",
       "      <td>116</td>\n",
       "      <td>116</td>\n",
       "      <td>116</td>\n",
       "      <td>116</td>\n",
       "      <td>116</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>1</th>\n",
       "      <td>112</td>\n",
       "      <td>112</td>\n",
       "      <td>112</td>\n",
       "      <td>112</td>\n",
       "      <td>112</td>\n",
       "      <td>112</td>\n",
       "      <td>112</td>\n",
       "      <td>112</td>\n",
       "      <td>112</td>\n",
       "      <td>112</td>\n",
       "      <td>112</td>\n",
       "      <td>112</td>\n",
       "      <td>112</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th rowspan=\"2\" valign=\"top\">Open Space</th>\n",
       "      <th>0</th>\n",
       "      <td>331</td>\n",
       "      <td>331</td>\n",
       "      <td>331</td>\n",
       "      <td>331</td>\n",
       "      <td>331</td>\n",
       "      <td>331</td>\n",
       "      <td>331</td>\n",
       "      <td>331</td>\n",
       "      <td>331</td>\n",
       "      <td>331</td>\n",
       "      <td>331</td>\n",
       "      <td>331</td>\n",
       "      <td>331</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>1</th>\n",
       "      <td>377</td>\n",
       "      <td>377</td>\n",
       "      <td>377</td>\n",
       "      <td>377</td>\n",
       "      <td>377</td>\n",
       "      <td>377</td>\n",
       "      <td>377</td>\n",
       "      <td>377</td>\n",
       "      <td>377</td>\n",
       "      <td>377</td>\n",
       "      <td>377</td>\n",
       "      <td>377</td>\n",
       "      <td>377</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th rowspan=\"2\" valign=\"top\">Residential</th>\n",
       "      <th>0</th>\n",
       "      <td>1029</td>\n",
       "      <td>1029</td>\n",
       "      <td>1029</td>\n",
       "      <td>1029</td>\n",
       "      <td>1029</td>\n",
       "      <td>1029</td>\n",
       "      <td>1029</td>\n",
       "      <td>1029</td>\n",
       "      <td>1029</td>\n",
       "      <td>1029</td>\n",
       "      <td>1029</td>\n",
       "      <td>1029</td>\n",
       "      <td>1029</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>1</th>\n",
       "      <td>1030</td>\n",
       "      <td>1030</td>\n",
       "      <td>1030</td>\n",
       "      <td>1030</td>\n",
       "      <td>1030</td>\n",
       "      <td>1030</td>\n",
       "      <td>1030</td>\n",
       "      <td>1030</td>\n",
       "      <td>1030</td>\n",
       "      <td>1030</td>\n",
       "      <td>1030</td>\n",
       "      <td>1030</td>\n",
       "      <td>1030</td>\n",
       "    </tr>\n",
       "  </tbody>\n",
       "</table>\n",
       "</div>"
      ],
      "text/plain": [
       "                      _file  copyright  date  location  pano_id  status  \\\n",
       "SUBDISTRIC    safety                                                      \n",
       "Business      0         107        107   106       107      107     107   \n",
       "              1         109        109   109       109      109     109   \n",
       "Comm/Instit   0          36         36    36        36       36      36   \n",
       "              1          32         32    32        32       32      32   \n",
       "Industrial    0         412        412   412       412      412     412   \n",
       "              1         106        106   106       106      106     106   \n",
       "Miscellaneous 0          88         88    88        88       88      88   \n",
       "              1          96         96    96        96       96      96   \n",
       "Mixed Use     0         116        116   115       116      116     116   \n",
       "              1         112        112   112       112      112     112   \n",
       "Open Space    0         331        331   331       331      331     331   \n",
       "              1         377        377   377       377      377     377   \n",
       "Residential   0        1029       1029  1029      1029     1029    1029   \n",
       "              1        1030       1030  1030      1030     1030    1030   \n",
       "\n",
       "                      Unnamed: 0  city  latitude  longitude  q-score  \\\n",
       "SUBDISTRIC    safety                                                   \n",
       "Business      0              107   107       107        107      107   \n",
       "              1              109   109       109        109      109   \n",
       "Comm/Instit   0               36    36        36         36       36   \n",
       "              1               32    32        32         32       32   \n",
       "Industrial    0              412   412       412        412      412   \n",
       "              1              106   106       106        106      106   \n",
       "Miscellaneous 0               88    88        88         88       88   \n",
       "              1               96    96        96         96       96   \n",
       "Mixed Use     0              116   116       116        116      116   \n",
       "              1              112   112       112        112      112   \n",
       "Open Space    0              331   331       331        331      331   \n",
       "              1              377   377       377        377      377   \n",
       "Residential   0             1029  1029      1029       1029     1029   \n",
       "              1             1030  1030      1030       1030     1030   \n",
       "\n",
       "                      Coordinates  OBJECTID  \n",
       "SUBDISTRIC    safety                         \n",
       "Business      0               107       107  \n",
       "              1               109       109  \n",
       "Comm/Instit   0                36        36  \n",
       "              1                32        32  \n",
       "Industrial    0               412       412  \n",
       "              1               106       106  \n",
       "Miscellaneous 0                88        88  \n",
       "              1                96        96  \n",
       "Mixed Use     0               116       116  \n",
       "              1               112       112  \n",
       "Open Space    0               331       331  \n",
       "              1               377       377  \n",
       "Residential   0              1029      1029  \n",
       "              1              1030      1030  "
      ]
     },
     "execution_count": 71,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "test.groupby(['SUBDISTRIC','safety']).count()"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 55,
   "metadata": {},
   "outputs": [
    {
     "data": {
      "text/html": [
       "<div>\n",
       "<style scoped>\n",
       "    .dataframe tbody tr th:only-of-type {\n",
       "        vertical-align: middle;\n",
       "    }\n",
       "\n",
       "    .dataframe tbody tr th {\n",
       "        vertical-align: top;\n",
       "    }\n",
       "\n",
       "    .dataframe thead th {\n",
       "        text-align: right;\n",
       "    }\n",
       "</style>\n",
       "<table border=\"1\" class=\"dataframe\">\n",
       "  <thead>\n",
       "    <tr style=\"text-align: right;\">\n",
       "      <th></th>\n",
       "      <th>_file</th>\n",
       "      <th>copyright</th>\n",
       "      <th>date</th>\n",
       "      <th>location</th>\n",
       "      <th>pano_id</th>\n",
       "      <th>status</th>\n",
       "      <th>Unnamed: 0</th>\n",
       "      <th>city</th>\n",
       "      <th>latitude</th>\n",
       "      <th>longitude</th>\n",
       "      <th>q-score</th>\n",
       "      <th>Coordinates</th>\n",
       "      <th>OBJECTID</th>\n",
       "      <th>SUBDISTRIC</th>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>safety</th>\n",
       "      <th></th>\n",
       "      <th></th>\n",
       "      <th></th>\n",
       "      <th></th>\n",
       "      <th></th>\n",
       "      <th></th>\n",
       "      <th></th>\n",
       "      <th></th>\n",
       "      <th></th>\n",
       "      <th></th>\n",
       "      <th></th>\n",
       "      <th></th>\n",
       "      <th></th>\n",
       "      <th></th>\n",
       "    </tr>\n",
       "  </thead>\n",
       "  <tbody>\n",
       "    <tr>\n",
       "      <th>0</th>\n",
       "      <td>2119</td>\n",
       "      <td>2119</td>\n",
       "      <td>2117</td>\n",
       "      <td>2119</td>\n",
       "      <td>2119</td>\n",
       "      <td>2119</td>\n",
       "      <td>2119</td>\n",
       "      <td>2119</td>\n",
       "      <td>2119</td>\n",
       "      <td>2119</td>\n",
       "      <td>2119</td>\n",
       "      <td>2119</td>\n",
       "      <td>2119</td>\n",
       "      <td>2119</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>1</th>\n",
       "      <td>1862</td>\n",
       "      <td>1862</td>\n",
       "      <td>1862</td>\n",
       "      <td>1862</td>\n",
       "      <td>1862</td>\n",
       "      <td>1862</td>\n",
       "      <td>1862</td>\n",
       "      <td>1862</td>\n",
       "      <td>1862</td>\n",
       "      <td>1862</td>\n",
       "      <td>1862</td>\n",
       "      <td>1862</td>\n",
       "      <td>1862</td>\n",
       "      <td>1862</td>\n",
       "    </tr>\n",
       "  </tbody>\n",
       "</table>\n",
       "</div>"
      ],
      "text/plain": [
       "        _file  copyright  date  location  pano_id  status  Unnamed: 0  city  \\\n",
       "safety                                                                        \n",
       "0        2119       2119  2117      2119     2119    2119        2119  2119   \n",
       "1        1862       1862  1862      1862     1862    1862        1862  1862   \n",
       "\n",
       "        latitude  longitude  q-score  Coordinates  OBJECTID  SUBDISTRIC  \n",
       "safety                                                                   \n",
       "0           2119       2119     2119         2119      2119        2119  \n",
       "1           1862       1862     1862         1862      1862        1862  "
      ]
     },
     "execution_count": 55,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "test.groupby(['safety']).count()"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "### Test set's portion of safey and subdistrict is similar to that of 'boston_safety_subsample'"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 69,
   "metadata": {},
   "outputs": [
    {
     "data": {
      "text/plain": [
       "SUBDISTRIC\n",
       "Business         0.054258\n",
       "Comm/Instit      0.017081\n",
       "Industrial       0.130118\n",
       "Miscellaneous    0.046220\n",
       "Mixed Use        0.057272\n",
       "Open Space       0.177845\n",
       "Residential      0.517207\n",
       "Name: _file, dtype: float64"
      ]
     },
     "execution_count": 69,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "test.groupby(['SUBDISTRIC']).count()['_file'] / test.groupby(['SUBDISTRIC']).count()['_file'].sum()"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 68,
   "metadata": {},
   "outputs": [
    {
     "data": {
      "text/plain": [
       "safety\n",
       "0    0.532278\n",
       "1    0.467722\n",
       "Name: _file, dtype: float64"
      ]
     },
     "execution_count": 68,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "test.groupby(['safety']).count()['_file'] / test.groupby(['safety']).count()['_file'].sum()"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 65,
   "metadata": {},
   "outputs": [
    {
     "data": {
      "text/plain": [
       "SUBDISTRIC\n",
       "Business         0.05340\n",
       "Comm/Instit      0.02100\n",
       "Industrial       0.13900\n",
       "Miscellaneous    0.04335\n",
       "Mixed Use        0.06575\n",
       "Open Space       0.17860\n",
       "Residential      0.49890\n",
       "Name: Unnamed: 0, dtype: float64"
      ]
     },
     "execution_count": 65,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "boston_safety_subsample.groupby(['SUBDISTRIC']).count()['Unnamed: 0'] / boston_safety_subsample.groupby(['SUBDISTRIC']).count()['Unnamed: 0'].sum()"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 70,
   "metadata": {},
   "outputs": [
    {
     "data": {
      "text/plain": [
       "safety\n",
       "0    0.54425\n",
       "1    0.45575\n",
       "Name: Unnamed: 0, dtype: float64"
      ]
     },
     "execution_count": 70,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "boston_safety_subsample.groupby(['safety']).count()['Unnamed: 0'] / boston_safety_subsample.groupby(['safety']).count()['Unnamed: 0'].sum()"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "### Save Train and Test, we will use Train set to build a Boston model and ue the Test set to evaluate the model's accuracy"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 79,
   "metadata": {},
   "outputs": [
    {
     "data": {
      "text/plain": [
       "(15923, 15)"
      ]
     },
     "execution_count": 79,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "train.shape"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 80,
   "metadata": {},
   "outputs": [
    {
     "data": {
      "text/plain": [
       "(3981, 15)"
      ]
     },
     "execution_count": 80,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "test.shape"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 81,
   "metadata": {},
   "outputs": [],
   "source": [
    "train.to_csv(\"~/Desktop/ML1030/us_safety/boston_train.csv\")"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 82,
   "metadata": {},
   "outputs": [],
   "source": [
    "test.to_csv(\"~/Desktop/ML1030/us_safety/boston_test.csv\")"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": null,
   "metadata": {},
   "outputs": [],
   "source": []
  }
 ],
 "metadata": {
  "kernelspec": {
   "display_name": "Python 3",
   "language": "python",
   "name": "python3"
  },
  "language_info": {
   "codemirror_mode": {
    "name": "ipython",
    "version": 3
   },
   "file_extension": ".py",
   "mimetype": "text/x-python",
   "name": "python",
   "nbconvert_exporter": "python",
   "pygments_lexer": "ipython3",
   "version": "3.6.8"
  }
 },
 "nbformat": 4,
 "nbformat_minor": 2
}
